(this.webpackJsonpreactblog=this.webpackJsonpreactblog||[]).push([[35],{123:function(e,t,n){"use strict";var r=n(49),c=n(0),o={icon:{tag:"svg",attrs:{viewBox:"64 64 896 896",focusable:"false"},children:[{tag:"path",attrs:{d:"M512 64C264.6 64 64 264.6 64 512s200.6 448 448 448 448-200.6 448-448S759.4 64 512 64zm165.4 618.2l-66-.3L512 563.4l-99.3 118.4-66.1.3c-4.4 0-8-3.5-8-8 0-1.9.7-3.7 1.9-5.2l130.1-155L340.5 359a8.32 8.32 0 01-1.9-5.2c0-4.4 3.6-8 8-8l66.1.3L512 464.6l99.3-118.4 66-.3c4.4 0 8 3.5 8 8 0 1.9-.7 3.7-1.9 5.2L553.5 514l130 155c1.2 1.5 1.9 3.3 1.9 5.2 0 4.4-3.6 8-8 8z"}}]},name:"close-circle",theme:"filled"},i=n(52),a=function(e,t){return c.createElement(i.a,Object(r.a)(Object(r.a)({},e),{},{ref:t,icon:o}))};a.displayName="CloseCircleFilled";t.a=c.forwardRef(a)},136:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(9);var c=n(18);function o(e){return function(e){if(Array.isArray(e))return Object(r.a)(e)}(e)||function(e){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||Object(c.a)(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},144:function(e,t){var n,r,c=e.exports={};function o(){throw new Error("setTimeout has not been defined")}function i(){throw new Error("clearTimeout has not been defined")}function a(e){if(n===setTimeout)return setTimeout(e,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"===typeof setTimeout?setTimeout:o}catch(e){n=o}try{r="function"===typeof clearTimeout?clearTimeout:i}catch(e){r=i}}();var s,u=[],l=!1,f=-1;function d(){l&&s&&(l=!1,s.length?u=s.concat(u):f=-1,u.length&&b())}function b(){if(!l){var e=a(d);l=!0;for(var t=u.length;t;){for(s=u,u=[];++f<t;)s&&s[f].run();f=-1,t=u.length}s=null,l=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===i||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function j(e,t){this.fun=e,this.array=t}function p(){}c.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];u.push(new j(e,t)),1!==u.length||l||a(b)},j.prototype.run=function(){this.fun.apply(null,this.array)},c.title="browser",c.browser=!0,c.env={},c.argv=[],c.version="",c.versions={},c.on=p,c.addListener=p,c.once=p,c.off=p,c.removeListener=p,c.removeAllListeners=p,c.emit=p,c.prependListener=p,c.prependOnceListener=p,c.listeners=function(e){return[]},c.binding=function(e){throw new Error("process.binding is not supported")},c.cwd=function(){return"/"},c.chdir=function(e){throw new Error("process.chdir is not supported")},c.umask=function(){return 0}},332:function(e,t,n){e.exports={keepalive:"keep-alive_keepalive__3hevg",router:"keep-alive_router__1ewSh",test:"keep-alive_test__3ohon"}},428:function(e,t,n){e.exports={testPage:"test-page_testPage__1nSxo",router:"test-page_router__113Xj",active:"test-page_active__XwVRC"}},429:function(e,t,n){e.exports={h5:"h5_h5__2mwi8"}},430:function(e,t,n){e.exports={handleMove:"dnd-sort_handleMove__7dVJI"}},431:function(e,t,n){e.exports={video:"knn_video__38eHu",lookTab:"knn_lookTab__CDu_s",inputTest:"knn_inputTest__3eYVH",button:"knn_button__zFAFF",ringBox:"knn_ringBox__1CVjc",ring:"knn_ring__2EKB4"}},432:function(e,t,n){e.exports={scroll:"virtual-scroll_scroll__1J62y",scrollBox:"virtual-scroll_scrollBox__2PV4p",scrollItem:"virtual-scroll_scrollItem__2Rv81"}},502:function(e,t,n){"use strict";n.r(t);var r=n(5),c=n(0),o=n(428),i=n.n(o),a=(n(71),n(70)),s=(n(90),n(91)),u=n(136),l=n(87),f=n(349),d=n(429),b=n.n(d),j=n(1),p={Button:function(e){var t=e.style;return Object(j.jsx)(a.a,{style:t,children:"\u6309\u94ae"})},Input:function(e){var t=e.style;return Object(j.jsx)(s.a,{style:t})}},v=n(430),O=n.n(v),h=n(520),m=n(521),y=n(512),x=n(449),g=n(443),_=n.n(g),k=function(e){var t=e.id,n=e.index,o=e.moveCard,i=Object(c.useRef)(null),a=Object(h.a)({accept:"box",collect:function(e){return{handlerId:e.getHandlerId()}},hover:function(e,t){var r;if(i.current){var c=e.index,a=n;if(c!==a){var s=null===(r=i.current)||void 0===r?void 0:r.getBoundingClientRect(),u=(s.bottom-s.top)/2,l=t.getClientOffset().y-s.top;c<a&&l<u||c>a&&l>u||(o(c,a),e.index=a)}}}}),s=Object(r.a)(a,2),u=s[0].handlerId,l=s[1],f=Object(m.a)({type:"box",item:function(){return{id:t,index:n}},collect:function(e){return{isDragging:e.isDragging()}}}),d=Object(r.a)(f,2),b=d[0].isDragging?0:1;return(0,d[1])(l(i)),Object(j.jsx)("span",{className:O.a.handleMove,ref:i,style:{opacity:b},"data-handler-id":u,children:e.children})},E=function(e){var t=e.cards,n=e.setCards,r=Object(c.useCallback)((function(e,r){var c=t[e];n(_()(t,{$splice:[[e,1],[r,0,c]]}))}),[t]);return Object(j.jsxs)(y.a,{backend:x.a,children:[Object(j.jsx)("div",{children:"\u7ec4\u4ef6\u5e93"}),Object(j.jsx)("div",{children:t.map((function(t,n){return Object(j.jsx)(k,{index:n,id:t.id,moveCard:r,children:e.children(t)},t.id)}))})]})},S=function(e){var t=Object(c.useRef)(null),n=Object(c.useState)(),o=Object(r.a)(n,2),i=o[0],a=o[1],s=Object(c.useState)(),u=Object(r.a)(s,2),l=u[0],f=u[1],d=Object(c.useState)(!1),b=Object(r.a)(d,2),p=b[0],v=b[1],O=Object(c.useRef)(null);return Object(c.useEffect)((function(){var e,n,r=0,c=0,o=0,i=0,s=function(e){r=t.current.offsetWidth,c=t.current.offsetHeight,o=e.clientX,i=e.clientY,document.documentElement.addEventListener("mousemove",l,!1)},u=function(e){document.documentElement.removeEventListener("mousemove",l,!1)},l=function(e){var n=r+e.clientX-o;t.current.style.width="".concat(n,"px"),a(n);var s=c+e.clientY-i;t.current.style.height="".concat(s,"px"),f(s)};p?(null===(e=O.current)||void 0===e||e.addEventListener("mousedown",s,!1),document.documentElement.addEventListener("mouseup",u,!1)):(null===(n=O.current)||void 0===n||n.removeEventListener("mousedown",s,!1),document.documentElement.removeEventListener("mouseup",u,!1))}),[p]),Object(j.jsxs)("span",{ref:t,style:{position:"relative",display:"inline-block",border:p?"1px solid black":"none"},onDoubleClick:function(){return v((function(e){return!e}))},children:[e.children(i,l),p&&Object(j.jsx)("span",{ref:O,style:{position:"absolute",backgroundColor:"black",display:"inline-block",width:4,height:4,bottom:0,right:0,cursor:"se-resize"}})]})},w=["type"],C=function(e){var t=e.type,n=Object(f.a)(e,w),r=p[t];return Object(j.jsx)(S,{children:function(e,t){return Object(j.jsx)(r,Object(l.a)(Object(l.a)({},n),{},{style:{width:e,height:t}}))}})},I=function(){var e=Object(c.useState)([{id:1,type:"Input",style:{},props:{}},{id:2,type:"Button",style:{},props:{}},{id:3,type:"Button",style:{},props:{}}]),t=Object(r.a)(e,2),n=t[0],o=t[1];Object(c.useEffect)((function(){console.log("cards",n)}),[n]);var i=Object(c.useState)(),l=Object(r.a)(i,2),f=l[0],d=l[1];Object(c.useEffect)((function(){console.log("activeCard",f),h(JSON.stringify((null===f||void 0===f?void 0:f.style)||""))}),[f]);var p=Object(c.useState)(),v=Object(r.a)(p,2),O=v[0],h=v[1];return Object(j.jsxs)("div",{className:b.a.h5,children:[Object(j.jsx)("div",{children:Object(j.jsx)(E,{cards:n,setCards:o,children:function(e){return Object(j.jsx)("span",{onClick:function(){d(e)},children:C(e)})}})}),Object(j.jsxs)("div",{children:[Object(j.jsx)("div",{children:"\u7f16\u8f91\u6837\u5f0f"}),Object(j.jsx)(s.a,{value:O,onChange:function(e){return h(e.target.value)}}),Object(j.jsx)(a.a,{onClick:function(){!function(){console.log(O);var e=Object(u.a)(n);e.forEach((function(e){e.id===(null===f||void 0===f?void 0:f.id)&&O&&(e.style=JSON.parse(O))})),o(e)}()},children:"\u63d0\u4ea4\u4fee\u6539"})]})]})},T=n(431),N=n.n(T),L=n(44),M=n.n(L),A=function(){var e=Object(c.useRef)(null),t=function(e,t,n){return Math.floor((e-t)/(n-t)*1e4)/1e4},n=Object(c.useState)(20),o=Object(r.a)(n,2),i=o[0],a=o[1],s=function(e,t,n){var r=Object(u.a)(e);return r.forEach((function(e){var r,c,o,i;e.distance=(r=e.x,c=e.y,o=t,i=n,Math.sqrt(Math.pow(o-r,2)+Math.pow(i-c,2)))})),r},f=function(e,t,n,r){var c=s(e,n,r);return c.sort((function(e,t){return e.distance-t.distance})),function(e){var t={};e.forEach((function(e){t[e.type]?t[e.type]+=1/(e.distance+1):t[e.type]=1/(e.distance+1)}));var n="",r=0;return Object.keys(t).forEach((function(e){t[e]>r&&(r=t[e],n=e)})),n}(c.splice(0,t))};Object(c.useEffect)((function(){O()}),[]);var d=Object(c.useState)([]),b=Object(r.a)(d,2),p=b[0],v=b[1],O=function(){var e=function(){for(var e=[],t=["I\u7c7b","II\u7c7b","III\u7c7b"],n=0;n<i;n++)e.push({x:Math.floor(100*Math.random()),y:Math.floor(80*Math.random()),type:t[n%t.length]});return e}();v(e),console.log("\u8bad\u7ec3\u6570\u636e",p)},h=Object(c.useState)([{x:2,y:2},{x:2,y:10},{x:50,y:5},{x:99,y:2},{x:99,y:9}]),m=Object(r.a)(h,2),y=m[0],x=m[1],g=Object(c.useState)(0),_=Object(r.a)(g,2),k=_[0],E=_[1],S=Object(c.useState)(0),w=Object(r.a)(S,2),C=w[0],I=w[1];Object(c.useEffect)((function(){0!==p.length&&0!==y.length&&P()}),[p,y]);var T=Object(c.useState)(0),L=Object(r.a)(T,2),A=L[0],B=L[1],P=function(){var n=Object(u.a)(y);console.log("\u6d4b\u8bd5\u6570\u636e",n);var r=function(e,n){var r=[].concat(Object(u.a)(e),Object(u.a)(n)),c=Number.MIN_VALUE,o=Number.MAX_VALUE,i=Number.MIN_VALUE,a=Number.MAX_VALUE;return r.forEach((function(e){e.x>c&&(c=e.x),e.y>i&&(i=e.y),e.x<o&&(o=e.x),e.y<a&&(a=e.y)})),{meanRandomList:e=e.map((function(e){return Object(l.a)(Object(l.a)({},e),{},{x:t(e.x,o,c),y:t(e.y,a,i)})})),meanTestList:n=n.map((function(e){return Object(l.a)(Object(l.a)({},e),{},{x:t(e.x,o,c),y:t(e.y,a,i)})}))}}(p,n),c=r.meanRandomList,o=r.meanTestList;console.log("\u5f52\u4e00\u5316\u540e\u7684\u8bad\u7ec3\u6570\u636e",c),console.log("\u5f52\u4e00\u5316\u540e\u7684\u6d4b\u8bd5\u6570\u636e",o);var i=function(e){for(var t=Math.floor(e.length/5),n=[],r=function(r){for(var c=[],o=function(n){var o=Object(u.a)(e),i=o.splice(n*t,t),a=0;i.forEach((function(e){e.type===f(o,r,e.x,e.y)&&a++})),c.push(a/(4===n?e.length-4*t:t))},i=0;i<5;i++)o(i);var a=0;c.forEach((function(e){a+=e})),n.push(a/5),console.log("k = ".concat(r," \u7684\u6b63\u786e\u7387: ").concat(a/5))},c=1;c<=20;c+=2)r(c);var o=0,i=0;return n.forEach((function(e,t){e>o&&(o=e,i=2*t+1)})),i}(c);B(i),console.log("\u7528\u8bad\u7ec3\u6570\u636e\u4ea4\u53c9\u9a8c\u8bc1\u5f97\u5230\u7684 k \u503c",i),console.log("\u7528 knn \u8ba1\u7b97\u5230\u6bcf\u4e2a\u70b9\u7684\u8ddd\u79bb\uff0c\u8fd4\u56de\u6743\u91cd\u6700\u5927\u7684\u5206\u7c7b\uff1a"),o.forEach((function(e,t){var r=f(c,i,e.x,e.y);n[t].type=r,console.log("[".concat(n[t].x,", ").concat(n[t].y,"]: ").concat(r))})),function(t,n){var r=e.current,c=M.a.init(r),o="black",i="orange",a="red",s={xAxis:{},yAxis:{},series:[{symbolSize:20,data:t.filter((function(e){return"I\u7c7b"===e.type})).map((function(e){return[e.x,e.y]})),color:o,type:"scatter"},{symbolSize:20,data:t.filter((function(e){return"II\u7c7b"===e.type})).map((function(e){return[e.x,e.y]})),color:i,type:"scatter"},{symbolSize:20,data:t.filter((function(e){return"III\u7c7b"===e.type})).map((function(e){return[e.x,e.y]})),color:a,type:"scatter"},{symbolSize:20,data:n.filter((function(e){return"I\u7c7b"===e.type})).map((function(e){return[e.x,e.y]})),color:"transparent",type:"scatter",itemStyle:{borderColor:o,borderWidth:3}},{symbolSize:20,data:n.filter((function(e){return"II\u7c7b"===e.type})).map((function(e){return[e.x,e.y]})),color:"transparent",type:"scatter",itemStyle:{borderColor:i,borderWidth:3}},{symbolSize:20,data:n.filter((function(e){return"III\u7c7b"===e.type})).map((function(e){return[e.x,e.y]})),color:"transparent",type:"scatter",itemStyle:{borderColor:a,borderWidth:3}}]};c.setOption(s)}(p,n),console.log("------------------------------------")};return Object(j.jsxs)("div",{className:N.a.video,children:[Object(j.jsxs)("div",{className:N.a.lookTab,children:[Object(j.jsx)("input",{className:N.a.inputTest,type:"text",value:k,onChange:function(e){E(e.target.value)}}),Object(j.jsx)("input",{className:N.a.inputTest,type:"text",value:C,onChange:function(e){I(e.target.value)}}),Object(j.jsx)("button",{className:N.a.button,onClick:function(){!function(){var e=[].concat(Object(u.a)(y),[{x:k,y:C}]);x(e)}()},children:"\u52a0\u5165\u6d4b\u8bd5\u6570\u636e"}),Object(j.jsx)("input",{className:N.a.inputTest,type:"text",value:i,onChange:function(e){a(e.target.value)}}),Object(j.jsx)("button",{className:N.a.button,onClick:function(){O()},children:"\u5237\u65b0\u8bad\u7ec3\u6570\u636e"}),Object(j.jsxs)("div",{children:["\u4ea4\u53c9\u9a8c\u8bc1\u540e\u7684 K \u503c\uff1a",A]})]}),Object(j.jsx)("div",{className:N.a.ringBox,children:Object(j.jsx)("div",{ref:e,className:N.a.ring})})]})},B=n(432),P=n.n(B),z=50,D=Math.floor(6)+1,R=function(){var e=Object(c.useState)([]),t=Object(r.a)(e,2),n=t[0],o=t[1],i=Object(c.useState)([]),a=Object(r.a)(i,2),s=a[0],u=a[1],l=Object(c.useState)(0),f=Object(r.a)(l,2),d=f[0],b=f[1],p=Object(c.useState)(0),v=Object(r.a)(p,2),O=v[0],h=v[1];Object(c.useEffect)((function(){for(var e=[],t=0;t<100;t++)e.push(t);o(e),u(e.slice(0,D)),h((100-D)*z)}),[]);return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("div",{className:P.a.scroll,style:{height:300},onScroll:function(e){var t=e.target.scrollTop,r=Math.floor(t/z);b(r*z),h((100-D-r)*z),u(n.slice(r+1,r+1+D))},children:Object(j.jsx)("div",{className:P.a.scrollBox,style:{paddingTop:d,paddingBottom:O},children:s.map((function(e){return Object(j.jsx)("div",{className:P.a.scrollItem,style:{height:z},children:e},e)}))})}),Object(j.jsxs)("div",{children:["paddingTop\uff1a",d,"px"]}),Object(j.jsxs)("div",{children:["paddingBottom\uff1a",O,"px"]}),Object(j.jsxs)("div",{children:["\u5f53\u524d\u6e32\u67d3\u5143\u7d20\uff1a",s.join(",")]})]})},V=n(332),F=n.n(V),H=function(e){var t=e.flag,n=Object(c.useState)(),o=Object(r.a)(n,2),i=o[0],a=o[1];return Object(c.useEffect)((function(){console.log("\u521d\u59cb\u5316\uff1a".concat(i)),a(1)}),[]),Object(j.jsxs)("div",{className:F.a.test,children:[t,"\uff1a",i,Object(j.jsx)("button",{onClick:function(){a((i||0)+1)},children:"\u70b9\u6211 + 1"})]})},J=function(){var e=["A","B","C","D","E","F","G"],t=Object(c.useState)("A"),n=Object(r.a)(t,2),o=n[0],i=n[1],a=Object(c.useState)([]),s=Object(r.a)(a,2),l=s[0],f=s[1];return Object(c.useEffect)((function(){l.includes(o)||f([].concat(Object(u.a)(l),[o]))}),[o]),Object(j.jsxs)("div",{className:F.a.keepalive,children:[Object(j.jsx)("div",{children:"\u6d4b\u8bd5\u7528\u6570\u7ec4\u5b9e\u73b0\u7684\u7ec4\u4ef6 keep-alive\uff0c\u539f\u7406 list.map + \u5224\u65ad\u6761\u4ef6\uff0c\u8fd8\u6709 display: none"}),Object(j.jsxs)("div",{className:F.a.router,children:["\u70b9\u51fb\u5207\u6362\u8def\u7531\uff1a",e.map((function(e){return Object(j.jsx)("span",{onClick:function(){return i(e)},children:e},e)}))]}),Object(j.jsxs)("div",{children:["\u5177\u4f53\u7ec4\u4ef6\uff1a",e.map((function(e){return l.includes(e)?Object(j.jsx)("div",{style:{display:e===o?"block":"none"},children:Object(j.jsx)(H,{flag:e},e)}):Object(j.jsx)(j.Fragment,{children:e===o&&Object(j.jsx)("div",{children:Object(j.jsx)(H,{flag:e},e)})})}))]})]})},X=n(79);t.default=function(){var e=Object(c.useState)("H5"),t=Object(r.a)(e,2),n=t[0],o=t[1];Object(X.a)("\u6d4b\u8bd5\u9875");var a=function(){var e={H5:I,knn:A,"virtual-scroll":R,"keep-alive":J}[n];return Object(j.jsx)(e,{})};return Object(j.jsxs)("div",{className:"".concat(i.a.testPage," ScrollBar"),children:[Object(j.jsx)("div",{children:"\u6d4b\u8bd5\u9875"}),Object(j.jsx)("div",{className:i.a.router,children:["H5","knn","keep-alive","virtual-scroll"].map((function(e){return Object(j.jsx)("span",{className:e===n?i.a.active:"",onClick:function(){return o(e)},children:e},e)}))}),n&&Object(j.jsx)(a,{})]})}},79:function(e,t,n){"use strict";var r=n(0);t.a=function(e){Object(r.useEffect)((function(){return document.title="[\u867e]".concat(e),function(){document.title="\u867e\u867e\u90d1\u7684\u4e2a\u4eba\u7f51\u7ad9"}}),[e])}},87:function(e,t,n){"use strict";n.d(t,"a",(function(){return o}));var r=n(97);function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){Object(r.a)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}},97:function(e,t,n){"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"a",(function(){return r}))}}]);