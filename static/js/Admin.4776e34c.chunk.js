(this.webpackJsonpreactblog=this.webpackJsonpreactblog||[]).push([[9],{101:function(e,t,a){"use strict";a(205);var n=a(207),c=(a(64),a(62)),r=(a(190),a(195)),s=a(55),i=a.n(s),o=a(130),u=a(56),p=(a(66),a(65)),d=a(5),l=a(0),b=a(352),f=a(8),j=a(16),m=a(107),h=a.n(m),O=a(94),v=a(136),x=a.n(v),_=a(1);t.a=function(e){var t=e.type,a=e.refresh,s=e.other_id,m=void 0===s?"":s,v=e.width,g=void 0===v?"170px":v,y=Object(l.useContext)(j.a).username,k=Object(l.useState)(),w=Object(d.a)(k,2),N=w[0],S=w[1],A=Object(l.useState)(),C=Object(d.a)(A,2),D=C[0],I=C[1],Y=Object(l.useState)(),F=Object(d.a)(Y,2),T=F[0],U=F[1],W=function(){var e=Object(u.a)(i.a.mark((function e(){var t,a,n,c,r,s,u,d,l,b;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,navigator.clipboard.read();case 2:t=e.sent,a=!1,n=Object(o.a)(t),e.prev=5,n.s();case 7:if((c=n.n()).done){e.next=34;break}r=c.value,s=Object(o.a)(r.types),e.prev=10,s.s();case 12:if((u=s.n()).done){e.next=24;break}if(d=u.value,a||-1===d.indexOf("image")){e.next=22;break}return console.log("clipboardItem",r),a=!0,e.next=19,r.getType(d);case 19:l=e.sent,b=new File([l],x()().format("YYYY-MM-DD HH:mm:ss")+"."+d.split("/").pop(),{type:l.type}),L(b);case 22:e.next=12;break;case 24:e.next=29;break;case 26:e.prev=26,e.t0=e.catch(10),s.e(e.t0);case 29:return e.prev=29,s.f(),e.finish(29);case 32:e.next=7;break;case 34:e.next=39;break;case 36:e.prev=36,e.t1=e.catch(5),n.e(e.t1);case 39:return e.prev=39,n.f(),e.finish(39);case 42:a||p.b.warning("\u8bf7\u5148\u622a\u56fe\uff0c\u518d\u7c98\u8d34");case 43:case"end":return e.stop()}}),e,null,[[5,36,39,42],[10,26,29,32]])})));return function(){return e.apply(this,arguments)}}(),B=Object(l.useState)(!1),H=Object(d.a)(B,2),J=H[0],K=H[1],L=function(e){K(!0);var n=new FormData;n.append("other_id",m),n.append("username",y),n.append(t,e),fetch("".concat(f.d,"/api/").concat(t,"_upload"),{method:"POST",body:n}).then((function(e){return e.json()})).then((function(e){p.b.success(e.message),a()})).catch((function(e){console.log(e)})).finally((function(){K(!1)}))};return Object(_.jsx)("div",{className:h.a.uploadWrapper,style:{width:"".concat(g),height:"".concat(g)},children:Object(_.jsx)(n.a,{className:h.a.upload,style:{width:"".concat(g),height:"".concat(g)},name:t,showUploadList:!1,action:"".concat(f.d,"/api/").concat(t,"_upload"),data:{other_id:m,username:y},beforeUpload:function(e){return S(e.name),I(0),U(e.size),!0},listType:"picture-card",onChange:function(e){"uploading"===e.file.status&&I(e.file.percent),"done"===e.file.status&&(p.b.success("\u4e0a\u4f20\u56fe\u7247\u6210\u529f"),S(void 0),a()),"error"===e.file.status&&p.b.error("\u4e0a\u4f20\u56fe\u7247\u5931\u8d25")},children:N?Object(_.jsxs)("div",{className:h.a.progress,children:[Object(_.jsx)("div",{className:h.a.name,children:N}),Object(_.jsx)("div",{children:Object(O.b)(T||0)}),Object(_.jsxs)("div",{children:["\u8fdb\u5ea6\uff1a",(D||0).toFixed(1),"%"]}),Object(_.jsx)(r.a,{strokeColor:{from:"#108ee9",to:"#87d068"},percent:D,status:"active"})]}):Object(_.jsxs)("div",{className:h.a.beforeUpload,children:[Object(_.jsx)(b.a,{className:h.a.addIcon}),"\u70b9\u51fb\u4e0a\u4f20\u56fe\u7247/\u6587\u4ef6",Object(_.jsx)(c.a,{className:h.a.parseButton,onClick:function(e){W(),e.preventDefault(),e.stopPropagation()},loading:J,children:"\u7c98\u8d34\u56fe\u7247"})]})})})}},107:function(e,t,a){e.exports={uploadWrapper:"file-image-upload_uploadWrapper__2KNmk",upload:"file-image-upload_upload__1_D8X",addIcon:"file-image-upload_addIcon__1icNG",progress:"file-image-upload_progress__1bAIy",name:"file-image-upload_name__2Am_K"}},518:function(e,t,a){e.exports={Admin:"admin_Admin__24mB7"}},594:function(e,t,a){"use strict";a.r(t);var n=a(55),c=a.n(n),r=a(56),s=a(5),i=a(0),o=a(184),u=a(122),p=a(518),d=a.n(p),l=a(16),b=a(101),f=a(1),j=function(){var e=Object(i.useState)([]),t=Object(s.a)(e,2),a=t[0],n=t[1],p=Object(i.useContext)(l.a).username;Object(i.useEffect)((function(){j()}),[]);var j=function(){var e=Object(r.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(o.b)("main",p);case 2:t=e.sent,n(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(f.jsxs)("div",{className:d.a.Admin,children:[Object(f.jsx)(b.a,{type:"main",refresh:j}),Object(f.jsx)(u.a,{type:"main",imageList:a,refresh:j})]})};t.default=function(){return Object(f.jsx)("div",{children:Object(f.jsx)(j,{})})}}}]);