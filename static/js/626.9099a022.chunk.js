(self.webpackChunkreactblog=self.webpackChunkreactblog||[]).push([["626"],{51493(e,t,r){"use strict";r.d(t,{A:()=>c});var n=r(31601),o=r.n(n),i=r(76314),l=r.n(i)()(o());l.push([e.id,".handleMove--228ec016:hover{border:1px solid #000;box-sizing:border-box}.dnd_sort--cc331ce2{display:flex;height:100%}.dnd_sort--cc331ce2>div{flex:1;height:100%;padding:30px}.dnd_sort--cc331ce2>div:first-child{border-right:1px solid #ccc}.dnd_sort--cc331ce2 .preview--89d380a0{min-height:500px;margin:50px auto 0;border:1px solid #ccc;border-radius:8px}.dnd_sort--cc331ce2 .source--d0bb619c{margin:50px auto 0}",""]),l.locals={handleMove:"handleMove--228ec016",dnd_sort:"dnd_sort--cc331ce2",dndSort:"dnd_sort--cc331ce2",preview:"preview--89d380a0",source:"source--d0bb619c"};let c=l},39333(e,t,r){"use strict";r.d(t,{A:()=>c});var n=r(31601),o=r.n(n),i=r(76314),l=r.n(i)()(o());l.push([e.id,".h5--042ac5bb{display:flex;font-size:16px;text-align:left}.h5--042ac5bb>div{flex:1;min-height:80vh;border:1px solid #ccc;box-sizing:border-box}.h5--042ac5bb>div:first-child{flex:2}.zoomEle-point{position:absolute;left:-4px;top:-4px;z-index:9;display:none;width:8px;height:8px;border-radius:99px;background-color:#fc6074;overflow:hidden}",""]),l.locals={h5:"h5--042ac5bb"};let c=l},47823(e,t,r){var n={"./":"81969","./image/index.tsx":"11731","./index.tsx":"81969","./image/":"11731","./image":"11731","./header":"6951","./image/index":"11731","./header/index.tsx":"6951","./index":"81969","./header/":"6951","./header/index":"6951"};function o(e){return Promise.resolve().then(function(){if(!r.o(n,e)){var t=Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r(n[e])})}o.keys=()=>Object.keys(n),o.id=47823,e.exports=o},6951(e,t,r){"use strict";r.r(t),r.d(t,{default:()=>o});var n=r(74848);r(96540);let o=function(e){var t=e.formData.title;return(0,n.jsx)("h2",{style:{},children:t||"头部标题"})}},11731(e,t,r){"use strict";r.r(t),r.d(t,{default:()=>o});var n=r(74848);r(96540);let o=function(e){return e.style,(0,n.jsx)("div",{children:"一张图片"})}},81969(e,t,r){"use strict";r.r(t),r.d(t,{componentsList:()=>i});var n=r(11731),o=r(6951),i=[{type:"image",Component:n.default,formItems:[{key:"image_url",label:"图片链接",type:"Input"}],formData:{image_url:"默认图片"}},{type:"header",Component:o.default,formItems:[{key:"title",label:"标题",type:"Input"}],formData:{title:"默认标题"}}]},78361(e,t,r){"use strict";r.r(t),r.d(t,{default:()=>ee});var n=r(74848),o=r(96540),i=r(85072),l=r.n(i),c=r(97825),a=r.n(c),u=r(77659),s=r.n(u),f=r(55056),d=r.n(f),y=r(10540),p=r.n(y),b=r(41113),m=r.n(b),h=r(39333),v={};v.styleTagTransform=m(),v.setAttributes=d(),v.insert=s().bind(null,"head"),v.domAPI=a(),v.insertStyleElement=p(),l()(h.A,v);let g=h.A&&h.A.locals?h.A.locals:void 0;var O=r(51493),j={};j.styleTagTransform=m(),j.setAttributes=d(),j.insert=s().bind(null,"head"),j.domAPI=a(),j.insertStyleElement=p(),l()(O.A,j);let x=O.A&&O.A.locals?O.A.locals:void 0;var w=r(47099),S=r(44298),A=r(64445),E=r(10808),I=r(46894),P=r.n(I),k=r(81969);function C(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function D(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,o=null==e?null:"u">typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=o){var i=[],l=!0,c=!1;try{for(o=o.call(e);!(l=(r=o.next()).done)&&(i.push(r.value),!t||i.length!==t);l=!0);}catch(e){c=!0,n=e}finally{try{l||null==o.return||o.return()}finally{if(c)throw n}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return C(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return C(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var R="formItem",_=function(e){var t=e.item,r=D((0,S.i)({type:R,item:t}),2),o=(r[0],r[1]);return(0,n.jsx)("div",{ref:o,children:e.children})},M=function(e){var t=e.handleDrop,r=D((0,w.H)({accept:R,drop:function(e,r){t(e)},collect:function(e){return{isOver:e.isOver()}}}),2),o=r[0].isOver,i=r[1];return(0,n.jsx)("div",{ref:i,style:o?{background:"#ccc"}:{},children:e.children})};function T(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function N(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}function L(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,o=null==e?null:"u">typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=o){var i=[],l=!0,c=!1;try{for(o=o.call(e);!(l=(r=o.next()).done)&&(i.push(r.value),!t||i.length!==t);l=!0);}catch(e){c=!0,n=e}finally{try{l||null==o.return||o.return()}finally{if(c)throw n}}return i}}(e,t)||z(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function z(e,t){if(e){if("string"==typeof e)return T(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return T(e,t)}}var K=function(e){var t=e.id,r=e.index,i=e.moveCard,l=(0,o.useRef)(null),c=L((0,w.H)({accept:"box",collect:function(e){return{handlerId:e.getHandlerId()}},hover:function(e,t){if(l.current){var n,o=e.index;if(o!==r){var c=null==(n=l.current)?void 0:n.getBoundingClientRect(),a=(c.bottom-c.top)/2,u=t.getClientOffset().y-c.top;o<r&&u<a||o>r&&u>a||(i(o,r),e.index=r)}}}}),2),a=c[0].handlerId,u=c[1],s=L((0,S.i)({type:"box",item:function(){return{id:t,index:r}},collect:function(e){return{isDragging:e.isDragging()}}}),3),f=s[0].isDragging,d=s[1];return(0,s[2])(d(u(l))),(0,n.jsx)(n.Fragment,{children:(0,n.jsx)("span",{className:x.handleMove,ref:l,style:{opacity:+!f},"data-handler-id":a,children:e.children})})};let U=function(e){var t=e.cards,r=e.setCards,i=(0,o.useCallback)(function(e,n){var o=t[e];r(P()(t,{$splice:[[e,1],[n,0,o]]}))},[t]);return(0,n.jsx)(A.Q,{backend:E.t,children:(0,n.jsxs)("div",{className:x.dnd_sort,children:[(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{children:"待选区"}),(0,n.jsx)("div",{className:x.source,children:k.componentsList.map(function(e,t){var r=e.Component;return(0,n.jsx)(_,{item:e,children:(0,n.jsx)(r,N({},e))},t)})})]}),(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{children:"预览区"}),(0,n.jsx)(M,{handleDrop:function(e){var n=function(e){if(Array.isArray(e))return T(e)}(t)||function(e){if("u">typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(t)||z(t)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}();n.push(N({id:Math.floor(1e5*Math.random())},e)),console.log(n),r(n)},children:(0,n.jsx)("div",{className:x.preview,children:t.map(function(t,r){return(0,n.jsx)(K,{index:r,id:t.id,moveCard:i,children:e.render(t)},t.id)})})})]})]})})};var F=r(84617),$=r(90697);function H(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function B(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,o=null==e?null:"u">typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=o){var i=[],l=!0,c=!1;try{for(o=o.call(e);!(l=(r=o.next()).done)&&(i.push(r.value),!t||i.length!==t);l=!0);}catch(e){c=!0,n=e}finally{try{l||null==o.return||o.return()}finally{if(c)throw n}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return H(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return H(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}let X=function(e){var t=(0,o.useRef)(null),r=B((0,o.useState)(),2),i=r[0],l=r[1],c=B((0,o.useState)(),2),a=c[0],u=c[1],s=B((0,o.useState)(!1),2),f=s[0],d=s[1],y=(0,o.useRef)(null);return(0,o.useEffect)(function(){var e,r,n=0,o=0,i=0,c=0,a=function(e){n=t.current.offsetWidth,o=t.current.offsetHeight,i=e.clientX,c=e.clientY,document.documentElement.addEventListener("mousemove",d,!1)},s=function(e){document.documentElement.removeEventListener("mousemove",d,!1)},d=function(e){var r=n+e.clientX-i;t.current.style.width="".concat(r,"px"),l(r);var a=o+e.clientY-c;t.current.style.height="".concat(a,"px"),u(a)};f?(null==(e=y.current)||e.addEventListener("mousedown",a,!1),document.documentElement.addEventListener("mouseup",s,!1)):(null==(r=y.current)||r.removeEventListener("mousedown",a,!1),document.documentElement.removeEventListener("mouseup",s,!1))},[f]),(0,n.jsxs)("span",{ref:t,style:{position:"relative",display:"inline-block",border:f?"1px solid black":"none",boxSizing:"border-box"},onDoubleClick:function(){return d(function(e){return!e})},children:[e.render(i,a),f&&(0,n.jsx)("span",{ref:y,style:{position:"absolute",backgroundColor:"black",display:"inline-block",width:4,height:4,bottom:0,right:0,cursor:"se-resize"}})]})};var Y=r(88824),Q={Input:function(e){var t=e.style,r=function(e,t){if(null==e)return{};var r,n,o,i={};if("u">typeof Reflect&&Reflect.ownKeys){for(o=0,r=Reflect.ownKeys(e);o<r.length;o++)n=r[o],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n]);return i}if(i=function(e,t){if(null==e)return{};var r,n,o={},i=Object.getOwnPropertyNames(e);for(n=0;n<i.length;n++)r=i[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r]);return o}(e,t),Object.getOwnPropertySymbols)for(o=0,r=Object.getOwnPropertySymbols(e);o<r.length;o++)n=r[o],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n]);return i}(e,["style"]);return(0,n.jsx)(Y.A,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({style:t},r))},Button:function(e){var t=e.style;return(0,n.jsx)($.Ay,{style:t,children:"按钮"})}},V=function(e){var t=e.item,r=function(e,t){if(null==e)return{};var r,n,o,i={};if("u">typeof Reflect&&Reflect.ownKeys){for(o=0,r=Reflect.ownKeys(e);o<r.length;o++)n=r[o],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n]);return i}if(i=function(e,t){if(null==e)return{};var r,n,o={},i=Object.getOwnPropertyNames(e);for(n=0;n<i.length;n++)r=i[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r]);return o}(e,t),Object.getOwnPropertySymbols)for(o=0,r=Object.getOwnPropertySymbols(e);o<r.length;o++)n=r[o],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n]);return i}(e,["item"]);console.log(r.value);var i=Q[t.type];return o.cloneElement((0,n.jsx)(i,function(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}({},r)))};function W(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function q(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){var n;n=r[t],t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n})}return e}function G(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):(function(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);r.push.apply(r,n)}return r})(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}function J(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r,n,o=null==e?null:"u">typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=o){var i=[],l=!0,c=!1;try{for(o=o.call(e);!(l=(r=o.next()).done)&&(i.push(r.value),!t||i.length!==t);l=!0);}catch(e){c=!0,n=e}finally{try{l||null==o.return||o.return()}finally{if(c)throw n}}return i}}(e,t)||function(e,t){if(e){if("string"==typeof e)return W(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return W(e,t)}}(e,t)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}var Z=function(e){var t=e.type,i=function(e,t){if(null==e)return{};var r,n,o,i={};if("u">typeof Reflect&&Reflect.ownKeys){for(o=0,r=Reflect.ownKeys(e);o<r.length;o++)n=r[o],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n]);return i}if(i=function(e,t){if(null==e)return{};var r,n,o={},i=Object.getOwnPropertyNames(e);for(n=0;n<i.length;n++)r=i[n],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(o[r]=e[r]);return o}(e,t),Object.getOwnPropertySymbols)for(o=0,r=Object.getOwnPropertySymbols(e);o<r.length;o++)n=r[o],!(t.indexOf(n)>=0)&&Object.prototype.propertyIsEnumerable.call(e,n)&&(i[n]=e[n]);return i}(e,["type"]),l=o.lazy(function(){return r(47823)("./".concat(t))});return(0,n.jsx)(X,{render:function(e,t){return(0,n.jsx)(l,G(q({},i),{style:{width:e,height:t}}))}})};let ee=function(){var e,t=J(F.A.useForm(),1)[0],r=J((0,o.useState)([]),2),i=r[0],l=r[1];(0,o.useEffect)(function(){console.log("cards",i)},[i]);var c=J((0,o.useState)(),2),a=c[0],u=c[1];return(0,n.jsxs)("div",{className:g.h5,children:[(0,n.jsx)("div",{children:(0,n.jsx)(U,{cards:i,setCards:l,render:function(e){return(0,n.jsx)("span",{onClick:function(){var r;u(e.id),t.setFieldsValue((null==(r=i.find(function(t){return t.id===e.id}))?void 0:r.formData)||{})},children:Z(e)})}})}),(0,n.jsx)("div",{children:(0,n.jsxs)("div",{style:{padding:30},children:[(0,n.jsx)("div",{style:{marginBottom:50},children:"编辑属性"}),a&&(0,n.jsxs)(F.A,{form:t,onFinish:function(e){console.log("activeCardId",a),console.log(e),l(i.map(function(t){return t.id!==a?t:G(q({},t),{formData:e})}))},children:[((null==(e=i.find(function(e){return e.id===a}))?void 0:e.formItems)||[]).map(function(e,t){return(0,n.jsx)(F.A.Item,{name:e.key,label:e.label,children:(0,n.jsx)(V,{item:e})},t)}),(0,n.jsx)($.Ay,{htmlType:"submit",children:"提交修改"})]})]})})]})}}}]);