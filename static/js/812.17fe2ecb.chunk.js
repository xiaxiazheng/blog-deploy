"use strict";(self.webpackChunkreactblog=self.webpackChunkreactblog||[]).push([["812"],{23101(t,e,n){n.d(e,{A:()=>c});var r=n(31601),o=n.n(r),a=n(76314),i=n.n(a)()(o());i.push([t.id,".video--88521aa5{position:relative;height:100%;font-size:24px;text-align:left}.video--88521aa5 .lookTab--6c587782{position:absolute;left:0;top:0}.video--88521aa5 .lookTab--6c587782>input,.video--88521aa5 .lookTab--6c587782>button,.video--88521aa5 .lookTab--6c587782>div{display:block;margin:10px 0 0 10px}.video--88521aa5 .lookTab--6c587782>button{padding:0 10px}.inputTest--6be435bb{font-size:20px}.button--b288f1d6{font-size:20px}.ringBox--4fade84a{margin:0 auto;width:800px;height:800px}.ringBox--4fade84a .ring--306c82db{width:100%;height:100%}",""]),i.locals={video:"video--88521aa5",lookTab:"lookTab--6c587782",inputTest:"inputTest--6be435bb",button:"button--b288f1d6",ringBox:"ringBox--4fade84a",ring:"ring--306c82db"};let c=i},6551(t,e,n){n.r(e),n.d(e,{default:()=>T});var r=n(74848),o=n(96540),a=n(85072),i=n.n(a),c=n(97825),u=n.n(c),l=n(77659),s=n.n(l),f=n(55056),y=n.n(f),p=n(10540),b=n.n(p),d=n(41113),h=n.n(d),m=n(23101),v={};v.styleTagTransform=h(),v.setAttributes=y(),v.insert=s().bind(null,"head"),v.domAPI=u(),v.insertStyleElement=b(),i()(m.A,v);let g=m.A&&m.A.locals?m.A.locals:void 0;var x=n(76888);function j(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=Array(e);n<e;n++)r[n]=t[n];return r}function S(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),r.forEach(function(e){var r;r=n[e],e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r})}return t}function O(t,e){return e=null!=e?e:{},Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(e)):(function(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);n.push.apply(n,r)}return n})(Object(e)).forEach(function(n){Object.defineProperty(t,n,Object.getOwnPropertyDescriptor(e,n))}),t}function I(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var n,r,o=null==t?null:"u">typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=o){var a=[],i=!0,c=!1;try{for(o=o.call(t);!(i=(n=o.next()).done)&&(a.push(n.value),!e||a.length!==e);i=!0);}catch(t){c=!0,r=t}finally{try{i||null==o.return||o.return()}finally{if(c)throw r}}return a}}(t,e)||A(t,e)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function k(t){return function(t){if(Array.isArray(t))return j(t)}(t)||function(t){if("u">typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}(t)||A(t)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function A(t,e){if(t){if("string"==typeof t)return j(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);if("Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n)return Array.from(n);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return j(t,e)}}let T=function(){var t=(0,o.useRef)(null),e=function(e,n){var r=t.current,o=x.Ts(r),a="black",i="orange",c={xAxis:{},yAxis:{},series:[{symbolSize:20,data:e.filter(function(t){return"I类"===t.type}).map(function(t){return[t.x,t.y]}),color:a,type:"scatter"},{symbolSize:20,data:e.filter(function(t){return"II类"===t.type}).map(function(t){return[t.x,t.y]}),color:i,type:"scatter"},{symbolSize:20,data:e.filter(function(t){return"III类"===t.type}).map(function(t){return[t.x,t.y]}),color:"red",type:"scatter"},{symbolSize:20,data:n.filter(function(t){return"I类"===t.type}).map(function(t){return[t.x,t.y]}),color:"transparent",type:"scatter",itemStyle:{borderColor:a,borderWidth:3}},{symbolSize:20,data:n.filter(function(t){return"II类"===t.type}).map(function(t){return[t.x,t.y]}),color:"transparent",type:"scatter",itemStyle:{borderColor:i,borderWidth:3}},{symbolSize:20,data:n.filter(function(t){return"III类"===t.type}).map(function(t){return[t.x,t.y]}),color:"transparent",type:"scatter",itemStyle:{borderColor:"red",borderWidth:3}}]};o.setOption(c)},n=function(t,e,n){return Math.floor((t-e)/(n-e)*1e4)/1e4},a=I((0,o.useState)(20),2),i=a[0],c=a[1],u=function(){for(var t=[],e=["I类","II类","III类"],n=0;n<i;n++)t.push({x:Math.floor(100*Math.random()),y:Math.floor(80*Math.random()),type:e[n%e.length]});return t},l=function(t){for(var e=function(e){for(var o=[],a=0;a<5;a++)!function(r){var a=k(t),i=a.splice(r*n,n),c=0;i.forEach(function(t){t.type===p(a,e,t.x,t.y)&&c++}),o.push(c/(4===r?t.length-4*n:n))}(a);var i=0;o.forEach(function(t){i+=t}),r.push(i/5),console.log("k = ".concat(e," 的正确率: ").concat(i/5))},n=Math.floor(t.length/5),r=[],o=1;o<=20;o+=2)e(o);var a=0,i=0;return r.forEach(function(t,e){t>a&&(a=t,i=2*e+1)}),i},s=function(t,e){var r=k(t).concat(k(e)),o=5e-324,a=Number.MAX_VALUE,i=5e-324,c=Number.MAX_VALUE;return r.forEach(function(t){t.x>o&&(o=t.x),t.y>i&&(i=t.y),t.x<a&&(a=t.x),t.y<c&&(c=t.y)}),{meanRandomList:t=t.map(function(t){return O(S({},t),{x:n(t.x,a,o),y:n(t.y,c,i)})}),meanTestList:e=e.map(function(t){return O(S({},t),{x:n(t.x,a,o),y:n(t.y,c,i)})})}},f=function(t,e,n){var r=k(t);return r.forEach(function(t){var r,o;r=t.x,o=t.y,t.distance=Math.sqrt(Math.pow(e-r,2)+Math.pow(n-o,2))}),r},y=function(t){var e={};t.forEach(function(t){e[t.type]?e[t.type]+=1/(t.distance+1):e[t.type]=1/(t.distance+1)});var n="",r=0;return Object.keys(e).forEach(function(t){e[t]>r&&(r=e[t],n=t)}),n},p=function(t,e,n,r){var o=f(t,n,r);return o.sort(function(t,e){return t.distance-e.distance}),y(o.splice(0,e))};(0,o.useEffect)(function(){m()},[]);var b=I((0,o.useState)([]),2),d=b[0],h=b[1],m=function(){h(u()),console.log("训练数据",d)},v=I((0,o.useState)([{x:2,y:2},{x:2,y:10},{x:50,y:5},{x:99,y:2},{x:99,y:9}]),2),j=v[0],A=v[1],T=I((0,o.useState)(0),2),w=T[0],E=T[1],M=I((0,o.useState)(0),2),P=M[0],C=M[1],N=function(){A(k(j).concat([{x:w,y:P}]))};(0,o.useEffect)(function(){0!==d.length&&0!==j.length&&D()},[d,j]);var z=I((0,o.useState)(0),2),L=z[0],B=z[1],D=function(){var t=k(j);console.log("测试数据",t);var n=s(d,t),r=n.meanRandomList,o=n.meanTestList;console.log("归一化后的训练数据",r),console.log("归一化后的测试数据",o);var a=l(r);B(a),console.log("用训练数据交叉验证得到的 k 值",a),console.log("用 knn 计算到每个点的距离，返回权重最大的分类："),o.forEach(function(e,n){var o=p(r,a,e.x,e.y);t[n].type=o,console.log("[".concat(t[n].x,", ").concat(t[n].y,"]: ").concat(o))}),e(d,t),console.log("------------------------------------")};return(0,r.jsxs)("div",{className:g.video,children:[(0,r.jsxs)("div",{className:g.lookTab,children:[(0,r.jsx)("input",{className:g.inputTest,type:"text",value:w,onChange:function(t){E(t.target.value)}}),(0,r.jsx)("input",{className:g.inputTest,type:"text",value:P,onChange:function(t){C(t.target.value)}}),(0,r.jsx)("button",{className:g.button,onClick:function(){N()},children:"加入测试数据"}),(0,r.jsx)("input",{className:g.inputTest,type:"text",value:i,onChange:function(t){c(t.target.value)}}),(0,r.jsx)("button",{className:g.button,onClick:function(){m()},children:"刷新训练数据"}),(0,r.jsxs)("div",{children:["交叉验证后的 K 值：",L]})]}),(0,r.jsx)("div",{className:g.ringBox,children:(0,r.jsx)("div",{ref:t,className:g.ring})})]})}}}]);