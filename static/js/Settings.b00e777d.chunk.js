(this.webpackJsonpreactblog=this.webpackJsonpreactblog||[]).push([[17],{1060:function(e,t,n){e.exports={table:"settings_table__3Oz8J",wrapper:"settings_wrapper__m3aQx",renderValue:"settings_renderValue__iopYb"}},1096:function(e,t,n){"use strict";n.r(t);var r=n(23),a=n(2),c=n.n(a),i=n(7),s=n(3),u=n(100),o=n(0),l=n(1060),d=n.n(l),j=n(937),b=n(555),p=n(714),O=n(1100),f=n(734),v=n(1077),x=n(8);t.default=function(){var e=[{title:"Name",dataIndex:"name",key:"name",width:150},{title:"Description",dataIndex:"description",width:300,key:"description",render:function(e){return Object(x.jsx)("div",{className:d.a.renderValue,children:e})}},{title:"Value",dataIndex:"value",key:"value",render:function(e){return Object(x.jsx)("div",{className:d.a.renderValue,children:e})}},{title:"Action",key:"action",width:200,render:function(e,n){return Object(x.jsxs)(j.b,{size:"middle",children:[Object(x.jsx)(b.a,{onClick:function(){return t(n)},children:"\u7f16\u8f91"}),Object(x.jsx)(b.a,{onClick:function(){return Q(n)},children:"\u5220\u9664"})]})}}],t=function(e){h(e),w(e.name),J(e.value),T(e.description),D(!0)},n=Object(o.useState)(),a=Object(s.a)(n,2),l=a[0],h=a[1],g=Object(o.useState)(),m=Object(s.a)(g,2),k=m[0],w=m[1],y=Object(o.useState)(),S=Object(s.a)(y,2),N=S[0],J=S[1],_=Object(o.useState)(),C=Object(s.a)(_,2),V=C[0],T=C[1],A=Object(o.useState)(!1),I=Object(s.a)(A,2),z=I[0],D=I[1],E=function(){var e=Object(i.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!k||!N){e.next=14;break}return e.prev=1,console.log(JSON.parse(N)),e.next=5,Object(u.u)({name:k,value:JSON.parse(N),description:V});case 5:D(!1),Y(),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),p.a.error("\u4fdd\u5b58\u5931\u8d25\uff0c\u5f53\u524d\u4e0d\u662f\u7b2c\u4e00\u4e2a\u5b8c\u6574\u5bf9\u8c61");case 12:e.next=15;break;case 14:p.a.error("\u4e0d\u80fd\u4e3a\u7a7a");case 15:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(){return e.apply(this,arguments)}}(),F=function(){var e=Object(i.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(l&&k&&N)){e.next=14;break}return e.prev=1,console.log(JSON.parse(N)),e.next=5,Object(u.Ob)({settings_id:null===l||void 0===l?void 0:l.settings_id,name:k,value:JSON.parse(N),description:V});case 5:L(),Y(),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),p.a.error("\u4fdd\u5b58\u5931\u8d25\uff0c\u5f53\u524d\u4e0d\u662f\u7b2c\u4e00\u4e2a\u5b8c\u6574\u5bf9\u8c61");case 12:e.next=15;break;case 14:p.a.error("\u4e0d\u80fd\u4e3a\u7a7a");case 15:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(){return e.apply(this,arguments)}}(),Q=function(){var e=Object(i.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:p.a.error("\u6682\u4e0d\u652f\u6301");case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(o.useEffect)((function(){Y()}),[]);var Y=function(){var e=Object(i.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(u.gb)();case 2:t=e.sent,K(t.map((function(e){return Object(r.a)(Object(r.a)({},e),{},{value:JSON.stringify(JSON.parse(e.value),null,"\t")})})));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),q=function(){try{N&&JSON.parse(N)}catch(e){return"\u683c\u5f0f\u51fa\u9519"}},B=Object(o.useState)([]),G=Object(s.a)(B,2),H=G[0],K=G[1],L=function(){D(!1),h(void 0),w(""),J(""),T("")};return Object(x.jsxs)("div",{className:d.a.wrapper,children:[Object(x.jsx)(b.a,{onClick:function(){D(!0)},children:"\u65b0\u5efa\u914d\u7f6e"}),Object(x.jsx)(O.a,{className:d.a.table,style:{width:"80vw"},scroll:{y:"calc(100vh - 300px)"},columns:e,dataSource:H},"settings_id"),Object(x.jsxs)(f.a,{open:z,onCancel:L,footer:Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(b.a,{onClick:function(){try{N&&J(JSON.stringify(JSON.parse(N),null,"\t"))}catch(e){p.a.error("\u5f53\u524d\u4e0d\u662f\u4e00\u4e2a\u5bf9\u8c61")}},children:"\u683c\u5f0f\u5316"}),Object(x.jsx)(b.a,{type:"primary",onClick:l?F:E,disabled:!k||!N||"\u683c\u5f0f\u51fa\u9519"===q(),children:"\u4fdd\u5b58"})]}),children:[Object(x.jsx)("div",{children:"\u914d\u7f6e\u540d\u79f0\uff1a"}),Object(x.jsx)(v.a,{value:k,onChange:function(e){return w(e.target.value)}}),Object(x.jsx)("div",{style:{marginTop:10},children:"\u914d\u7f6e\u63cf\u8ff0\uff1a"}),Object(x.jsx)(v.a.TextArea,{rows:3,value:V,onChange:function(e){return T(e.target.value)}}),Object(x.jsx)("div",{style:{marginTop:10},children:"\u5177\u4f53\u914d\u7f6e\uff1a"}),Object(x.jsx)(v.a.TextArea,{rows:16,value:N,onChange:function(e){return J(e.target.value)}}),Object(x.jsx)("div",{style:{color:"red"},children:q()})]})]})}}}]);