(this.webpackJsonpreactblog=this.webpackJsonpreactblog||[]).push([[18],{824:function(e,t,n){e.exports={table:"settings_table__3Oz8J",wrapper:"settings_wrapper__m3aQx",renderValue:"settings_renderValue__iopYb"}},861:function(e,t,n){"use strict";n.r(t);var r=n(48),a=n(2),c=n.n(a),s=n(3),i=n(4),u=n(105),o=n(0),l=n(824),b=n.n(l),j=n(691),p=n(271),O=n(871),d=n(865),f=n(472),v=n(840),x=n(8);t.default=function(){var e=[{title:"Name",dataIndex:"name",key:"name"},{title:"Value",dataIndex:"value",key:"value",render:function(e){return Object(x.jsx)("div",{className:b.a.renderValue,children:e})}},{title:"Action",key:"action",render:function(e,n){return Object(x.jsxs)(j.b,{size:"middle",children:[Object(x.jsx)(p.a,{onClick:function(){return t(n)},children:"\u7f16\u8f91"}),Object(x.jsx)(p.a,{onClick:function(){return Q(n)},children:"\u5220\u9664"})]})}}],t=function(e){h(e),y(e.name),J(e.value),z(!0)},n=Object(o.useState)(),a=Object(i.a)(n,2),l=a[0],h=a[1],k=Object(o.useState)(),m=Object(i.a)(k,2),g=m[0],y=m[1],w=Object(o.useState)(),S=Object(i.a)(w,2),N=S[0],J=S[1],_=Object(o.useState)(!1),C=Object(i.a)(_,2),V=C[0],z=C[1],A=function(){var e=Object(s.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!g||!N){e.next=14;break}return e.prev=1,console.log(JSON.parse(N)),e.next=5,Object(u.h)({name:g,value:JSON.parse(N)});case 5:z(!1),T(),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),O.a.error("\u4fdd\u5b58\u5931\u8d25\uff0c\u5f53\u524d\u4e0d\u662f\u7b2c\u4e00\u4e2a\u5b8c\u6574\u5bf9\u8c61");case 12:e.next=15;break;case 14:O.a.error("\u4e0d\u80fd\u4e3a\u7a7a");case 15:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(){return e.apply(this,arguments)}}(),I=function(){var e=Object(s.a)(c.a.mark((function e(){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(l&&g&&N)){e.next=14;break}return e.prev=1,console.log(JSON.parse(N)),e.next=5,Object(u.sb)({settings_id:null===l||void 0===l?void 0:l.settings_id,name:g,value:JSON.parse(N)});case 5:z(!1),T(),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(1),O.a.error("\u4fdd\u5b58\u5931\u8d25\uff0c\u5f53\u524d\u4e0d\u662f\u7b2c\u4e00\u4e2a\u5b8c\u6574\u5bf9\u8c61");case 12:e.next=15;break;case 14:O.a.error("\u4e0d\u80fd\u4e3a\u7a7a");case 15:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(){return e.apply(this,arguments)}}(),Q=function(){var e=Object(s.a)(c.a.mark((function e(t){return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:O.a.error("\u6682\u4e0d\u652f\u6301");case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();Object(o.useEffect)((function(){T()}),[]);var T=function(){var e=Object(s.a)(c.a.mark((function e(){var t;return c.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(u.Q)();case 2:t=e.sent,B(t.map((function(e){return Object(r.a)(Object(r.a)({},e),{},{value:JSON.stringify(JSON.parse(e.value),null,"\t")})})));case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),E=function(){try{N&&JSON.parse(N)}catch(e){return"\u683c\u5f0f\u51fa\u9519"}},F=Object(o.useState)([]),Y=Object(i.a)(F,2),q=Y[0],B=Y[1];return Object(x.jsxs)("div",{className:b.a.wrapper,children:[Object(x.jsx)(p.a,{onClick:function(){z(!0)},children:"\u65b0\u5efa\u914d\u7f6e"}),Object(x.jsx)(d.a,{className:b.a.table,style:{width:800},scroll:{y:"calc(100vh - 300px)"},columns:e,dataSource:q},"settings_id"),Object(x.jsxs)(f.a,{open:V,onCancel:function(){z(!1),h(void 0),y(""),J("")},footer:Object(x.jsxs)(x.Fragment,{children:[Object(x.jsx)(p.a,{onClick:function(){try{N&&J(JSON.stringify(JSON.parse(N),null,"\t"))}catch(e){O.a.error("\u5f53\u524d\u4e0d\u662f\u4e00\u4e2a\u5bf9\u8c61")}},children:"\u683c\u5f0f\u5316"}),Object(x.jsx)(p.a,{type:"primary",onClick:l?I:A,disabled:!g||!N||"\u683c\u5f0f\u51fa\u9519"===E(),children:"\u4fdd\u5b58"})]}),children:[Object(x.jsx)("div",{children:"\u914d\u7f6e\u540d\u79f0\uff1a"}),Object(x.jsx)(v.a,{value:g,onChange:function(e){return y(e.target.value)}}),Object(x.jsx)("div",{style:{marginTop:10},children:"\u5177\u4f53\u914d\u7f6e\uff1a"}),Object(x.jsx)(v.a.TextArea,{rows:8,value:N,onChange:function(e){return J(e.target.value)}}),Object(x.jsx)("div",{style:{color:"red"},children:E()})]})]})}}}]);