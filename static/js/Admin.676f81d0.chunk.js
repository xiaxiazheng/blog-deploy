(this.webpackJsonpreactblog=this.webpackJsonpreactblog||[]).push([[8],{338:function(e,t,a){"use strict";var n=a(2),r=a.n(n),c=a(154),s=a(7),i=a(3),o=a(0),u=a(496),p=a(890),l=a(336),d=a(684),f=a(152),b=a(346),j=a.n(b),m=a(65),h=a.n(m),v=a(100),x=a(8);t.a=function(e){var t=e.type,a=e.refresh,n=e.other_id,b=void 0===n?"":n,m=e.width,O=void 0===m?"170px":m,g=Object(o.useContext)(f.a).username,_=Object(o.useState)(),y=Object(i.a)(_,2),k=y[0],w=y[1],N=Object(o.useState)(),Y=Object(i.a)(N,2),D=Y[0],C=Y[1],A=Object(o.useState)(),I=Object(i.a)(A,2),S=I[0],H=I[1],M=function(){var e=Object(s.a)(r.a.mark((function e(){var t,a,n,s,i,o,p,l,d,f;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,navigator.clipboard.read();case 2:t=e.sent,a=!1,n=Object(c.a)(t),e.prev=5,n.s();case 7:if((s=n.n()).done){e.next=34;break}i=s.value,o=Object(c.a)(i.types),e.prev=10,o.s();case 12:if((p=o.n()).done){e.next=24;break}if(l=p.value,a||-1===l.indexOf("image")){e.next=22;break}return console.log("clipboardItem",i),a=!0,e.next=19,i.getType(l);case 19:d=e.sent,f=new File([d],h()().format("YYYY-MM-DD HH:mm:ss")+"."+l.split("/").pop(),{type:d.type}),P(f);case 22:e.next=12;break;case 24:e.next=29;break;case 26:e.prev=26,e.t0=e.catch(10),o.e(e.t0);case 29:return e.prev=29,o.f(),e.finish(29);case 32:e.next=7;break;case 34:e.next=39;break;case 36:e.prev=36,e.t1=e.catch(5),n.e(e.t1);case 39:return e.prev=39,n.f(),e.finish(39);case 42:a||u.a.warning("\u8bf7\u5148\u622a\u56fe\uff0c\u518d\u7c98\u8d34");case 43:case"end":return e.stop()}}),e,null,[[5,36,39,42],[10,26,29,32]])})));return function(){return e.apply(this,arguments)}}(),F=function(){var e=Object(s.a)(r.a.mark((function e(){var t,a;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===(t=prompt("\u8bf7\u8f93\u5165\u5c06\u4e0a\u4f20\u7684\u56fe\u7247\u7684 url"))||""===t){e.next=6;break}return e.next=4,fetch(t).then((function(e){return e.blob()})).then((function(e){return e.type.includes("images")?new File([e],h()().format("YYYY-MM-DD HH:mm:ss")+"."+e.type.split("/").pop(),{type:e.type}):(u.a.error("\u8bf7\u8f93\u5165\u56fe\u7247\u7684 url\uff0c\u5f53\u524d url \u6293\u4e0d\u5230\u56fe\u7247"),!1)}));case 4:(a=e.sent)&&P(a);case 6:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),W=Object(o.useState)(!1),B=Object(i.a)(W,2),J=B[0],K=B[1],P=function(){var e=Object(s.a)(r.a.mark((function e(n){var c;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return K(!0),e.next=3,Object(v.ub)({file:n,upload_type:t,username:g,other_id:b});case 3:(c=e.sent)&&(u.a.success(c.message),a()),K(!1);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(x.jsx)("div",{className:j.a.uploadWrapper,style:{width:"".concat(O),height:"".concat(O)},children:Object(x.jsx)(v.p,{upload_type:t,other_id:b,username:g,className:j.a.upload,style:{width:"".concat(O),height:"".concat(O)},beforeUpload:function(e){return w(e.name),C(0),H(e.size),!0},onChange:function(e){"uploading"===e.file.status&&C(e.file.percent),"done"===e.file.status&&(u.a.success("\u4e0a\u4f20\u56fe\u7247\u6210\u529f"),w(void 0),a()),"error"===e.file.status&&u.a.error("\u4e0a\u4f20\u56fe\u7247\u5931\u8d25")},children:k?Object(x.jsxs)("div",{className:j.a.progress,children:[Object(x.jsx)("div",{className:j.a.name,children:k}),Object(x.jsx)("div",{children:Object(v.sb)(S||0)}),Object(x.jsxs)("div",{children:["\u8fdb\u5ea6\uff1a",(D||0).toFixed(1),"%"]}),Object(x.jsx)(p.a,{strokeColor:{from:"#108ee9",to:"#87d068"},percent:D,status:"active"})]}):Object(x.jsxs)("div",{className:j.a.beforeUpload,children:[Object(x.jsx)(d.a,{className:j.a.addIcon}),"\u70b9\u51fb\u4e0a\u4f20\u56fe\u7247/\u6587\u4ef6",Object(x.jsx)(l.a,{className:j.a.parseButton,onClick:function(e){M(),e.preventDefault(),e.stopPropagation()},loading:J,children:"\u7c98\u8d34\u56fe\u7247"}),Object(x.jsx)(l.a,{onClick:function(e){F(),e.preventDefault(),e.stopPropagation()},loading:J,children:"\u7c98\u8d34\u94fe\u63a5"})]})})})}},346:function(e,t,a){e.exports={uploadWrapper:"file-image-upload_uploadWrapper__2KNmk",upload:"file-image-upload_upload__1_D8X",addIcon:"file-image-upload_addIcon__1icNG",progress:"file-image-upload_progress__1bAIy",name:"file-image-upload_name__2Am_K"}},749:function(e,t,a){e.exports={Admin:"admin_Admin__24mB7"}},878:function(e,t,a){"use strict";a.r(t);var n=a(2),r=a.n(n),c=a(7),s=a(3),i=a(0),o=a(100),u=a(350),p=a(749),l=a.n(p),d=a(152),f=a(338),b=a(8),j=function(){var e=Object(i.useState)([]),t=Object(s.a)(e,2),a=t[0],n=t[1],p=Object(i.useContext)(d.a).username;Object(i.useEffect)((function(){j()}),[]);var j=function(){var e=Object(c.a)(r.a.mark((function e(){var t;return r.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(o.Y)("main",p);case 2:t=e.sent,n(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();return Object(b.jsxs)("div",{className:l.a.Admin,children:[Object(b.jsx)(f.a,{type:"main",refresh:j}),Object(b.jsx)(u.a,{type:"main",imageList:a,refresh:j})]})};t.default=function(){return Object(b.jsx)("div",{children:Object(b.jsx)(j,{})})}}}]);