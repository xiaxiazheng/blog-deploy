(this.webpackJsonpreactblog=this.webpackJsonpreactblog||[]).push([[18],{333:function(t,e,n){t.exports={keepalive:"keep-alive_keepalive__3hevg",router:"keep-alive_router__1ewSh",test:"keep-alive_test__3ohon"}},392:function(t,e,n){t.exports={testPage:"test-page_testPage__1nSxo",router:"test-page_router__113Xj"}},393:function(t,e,n){t.exports={video:"knn_video__38eHu",lookTab:"knn_lookTab__CDu_s",inputTest:"knn_inputTest__3eYVH",button:"knn_button__zFAFF",ringBox:"knn_ringBox__1CVjc",ring:"knn_ring__2EKB4"}},394:function(t,e,n){t.exports={scroll:"virtual-scroll_scroll__1J62y",scrollBox:"virtual-scroll_scrollBox__2PV4p",scrollItem:"virtual-scroll_scrollItem__2Rv81"}},483:function(t,e,n){"use strict";n.r(e);var c=n(5),a=n(0),r=n(392),o=n.n(r),s=n(99),i=n(164),l=n(393),u=n.n(l),j=n(44),b=n.n(j),f=n(1),d=function(){var t=Object(a.useRef)(null),e=function(t,e,n){return Math.floor((t-e)/(n-e)*1e4)/1e4},n=Object(a.useState)(20),r=Object(c.a)(n,2),o=r[0],l=r[1],j=function(t,e,n){var c=Object(i.a)(t);return c.forEach((function(t){var c,a,r,o;t.distance=(c=t.x,a=t.y,r=e,o=n,Math.sqrt(Math.pow(r-c,2)+Math.pow(o-a,2)))})),c},d=function(t,e,n,c){var a=j(t,n,c);return a.sort((function(t,e){return t.distance-e.distance})),function(t){var e={};t.forEach((function(t){e[t.type]?e[t.type]+=1/(t.distance+1):e[t.type]=1/(t.distance+1)}));var n="",c=0;return Object.keys(e).forEach((function(t){e[t]>c&&(c=e[t],n=t)})),n}(a.splice(0,e))};Object(a.useEffect)((function(){h()}),[]);var p=Object(a.useState)([]),O=Object(c.a)(p,2),x=O[0],v=O[1],h=function(){var t=function(){for(var t=[],e=["I\u7c7b","II\u7c7b","III\u7c7b"],n=0;n<o;n++)t.push({x:Math.floor(100*Math.random()),y:Math.floor(80*Math.random()),type:e[n%e.length]});return t}();v(t),console.log("\u8bad\u7ec3\u6570\u636e",x)},y=Object(a.useState)([{x:2,y:2},{x:2,y:10},{x:50,y:5},{x:99,y:2},{x:99,y:9}]),m=Object(c.a)(y,2),g=m[0],_=m[1],k=Object(a.useState)(0),S=Object(c.a)(k,2),I=S[0],N=S[1],E=Object(a.useState)(0),M=Object(c.a)(E,2),C=M[0],T=M[1];Object(a.useEffect)((function(){0!==x.length&&0!==g.length&&V()}),[x,g]);var A=Object(a.useState)(0),B=Object(c.a)(A,2),L=B[0],z=B[1],V=function(){var n=Object(i.a)(g);console.log("\u6d4b\u8bd5\u6570\u636e",n);var c=function(t,n){var c=[].concat(Object(i.a)(t),Object(i.a)(n)),a=Number.MIN_VALUE,r=Number.MAX_VALUE,o=Number.MIN_VALUE,l=Number.MAX_VALUE;return c.forEach((function(t){t.x>a&&(a=t.x),t.y>o&&(o=t.y),t.x<r&&(r=t.x),t.y<l&&(l=t.y)})),{meanRandomList:t=t.map((function(t){return Object(s.a)(Object(s.a)({},t),{},{x:e(t.x,r,a),y:e(t.y,l,o)})})),meanTestList:n=n.map((function(t){return Object(s.a)(Object(s.a)({},t),{},{x:e(t.x,r,a),y:e(t.y,l,o)})}))}}(x,n),a=c.meanRandomList,r=c.meanTestList;console.log("\u5f52\u4e00\u5316\u540e\u7684\u8bad\u7ec3\u6570\u636e",a),console.log("\u5f52\u4e00\u5316\u540e\u7684\u6d4b\u8bd5\u6570\u636e",r);var o=function(t){for(var e=Math.floor(t.length/5),n=[],c=function(c){for(var a=[],r=function(n){var r=Object(i.a)(t),o=r.splice(n*e,e),s=0;o.forEach((function(t){t.type===d(r,c,t.x,t.y)&&s++})),a.push(s/(4===n?t.length-4*e:e))},o=0;o<5;o++)r(o);var s=0;a.forEach((function(t){s+=t})),n.push(s/5),console.log("k = ".concat(c," \u7684\u6b63\u786e\u7387: ").concat(s/5))},a=1;a<=20;a+=2)c(a);var r=0,o=0;return n.forEach((function(t,e){t>r&&(r=t,o=2*e+1)})),o}(a);z(o),console.log("\u7528\u8bad\u7ec3\u6570\u636e\u4ea4\u53c9\u9a8c\u8bc1\u5f97\u5230\u7684 k \u503c",o),console.log("\u7528 knn \u8ba1\u7b97\u5230\u6bcf\u4e2a\u70b9\u7684\u8ddd\u79bb\uff0c\u8fd4\u56de\u6743\u91cd\u6700\u5927\u7684\u5206\u7c7b\uff1a"),r.forEach((function(t,e){var c=d(a,o,t.x,t.y);n[e].type=c,console.log("[".concat(n[e].x,", ").concat(n[e].y,"]: ").concat(c))})),function(e,n){var c=t.current,a=b.a.init(c),r="black",o="orange",s="red",i={xAxis:{},yAxis:{},series:[{symbolSize:20,data:e.filter((function(t){return"I\u7c7b"===t.type})).map((function(t){return[t.x,t.y]})),color:r,type:"scatter"},{symbolSize:20,data:e.filter((function(t){return"II\u7c7b"===t.type})).map((function(t){return[t.x,t.y]})),color:o,type:"scatter"},{symbolSize:20,data:e.filter((function(t){return"III\u7c7b"===t.type})).map((function(t){return[t.x,t.y]})),color:s,type:"scatter"},{symbolSize:20,data:n.filter((function(t){return"I\u7c7b"===t.type})).map((function(t){return[t.x,t.y]})),color:"transparent",type:"scatter",itemStyle:{borderColor:r,borderWidth:3}},{symbolSize:20,data:n.filter((function(t){return"II\u7c7b"===t.type})).map((function(t){return[t.x,t.y]})),color:"transparent",type:"scatter",itemStyle:{borderColor:o,borderWidth:3}},{symbolSize:20,data:n.filter((function(t){return"III\u7c7b"===t.type})).map((function(t){return[t.x,t.y]})),color:"transparent",type:"scatter",itemStyle:{borderColor:s,borderWidth:3}}]};a.setOption(i)}(x,n),console.log("------------------------------------")};return Object(f.jsxs)("div",{className:u.a.video,children:[Object(f.jsxs)("div",{className:u.a.lookTab,children:[Object(f.jsx)("input",{className:u.a.inputTest,type:"text",value:I,onChange:function(t){N(t.target.value)}}),Object(f.jsx)("input",{className:u.a.inputTest,type:"text",value:C,onChange:function(t){T(t.target.value)}}),Object(f.jsx)("button",{className:u.a.button,onClick:function(){!function(){var t=[].concat(Object(i.a)(g),[{x:I,y:C}]);_(t)}()},children:"\u52a0\u5165\u6d4b\u8bd5\u6570\u636e"}),Object(f.jsx)("input",{className:u.a.inputTest,type:"text",value:o,onChange:function(t){l(t.target.value)}}),Object(f.jsx)("button",{className:u.a.button,onClick:function(){h()},children:"\u5237\u65b0\u8bad\u7ec3\u6570\u636e"}),Object(f.jsxs)("div",{children:["\u4ea4\u53c9\u9a8c\u8bc1\u540e\u7684 K \u503c\uff1a",L]})]}),Object(f.jsx)("div",{className:u.a.ringBox,children:Object(f.jsx)("div",{ref:t,className:u.a.ring})})]})},p=n(394),O=n.n(p),x=50,v=Math.floor(6)+1,h=function(){var t=Object(a.useState)([]),e=Object(c.a)(t,2),n=e[0],r=e[1],o=Object(a.useState)([]),s=Object(c.a)(o,2),i=s[0],l=s[1],u=Object(a.useState)(0),j=Object(c.a)(u,2),b=j[0],d=j[1],p=Object(a.useState)(0),h=Object(c.a)(p,2),y=h[0],m=h[1];Object(a.useEffect)((function(){for(var t=[],e=0;e<100;e++)t.push(e);r(t),l(t.slice(0,v)),m((100-v)*x)}),[]);return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)("div",{className:O.a.scroll,style:{height:300},onScroll:function(t){var e=t.target.scrollTop,c=Math.floor(e/x);d(c*x),m((100-v-c)*x),l(n.slice(c+1,c+1+v))},children:Object(f.jsx)("div",{className:O.a.scrollBox,style:{paddingTop:b,paddingBottom:y},children:i.map((function(t){return Object(f.jsx)("div",{className:O.a.scrollItem,style:{height:x},children:t},t)}))})}),Object(f.jsxs)("div",{children:["paddingTop\uff1a",b,"px"]}),Object(f.jsxs)("div",{children:["paddingBottom\uff1a",y,"px"]}),Object(f.jsxs)("div",{children:["\u5f53\u524d\u6e32\u67d3\u5143\u7d20\uff1a",i.join(",")]})]})},y=n(333),m=n.n(y),g=function(t){var e=t.flag,n=Object(a.useState)(),r=Object(c.a)(n,2),o=r[0],s=r[1];return Object(a.useEffect)((function(){console.log("\u521d\u59cb\u5316\uff1a".concat(o)),s(1)}),[]),Object(f.jsxs)("div",{className:m.a.test,children:[e,"\uff1a",o,Object(f.jsx)("button",{onClick:function(){s((o||0)+1)},children:"\u70b9\u6211 + 1"})]})},_=function(){var t=["A","B","C","D","E","F","G"],e=Object(a.useState)("A"),n=Object(c.a)(e,2),r=n[0],o=n[1],s=Object(a.useState)([]),l=Object(c.a)(s,2),u=l[0],j=l[1];return Object(a.useEffect)((function(){u.includes(r)||j([].concat(Object(i.a)(u),[r]))}),[r]),Object(f.jsxs)("div",{className:m.a.keepalive,children:[Object(f.jsx)("div",{children:"\u6d4b\u8bd5\u7528\u6570\u7ec4\u5b9e\u73b0\u7684\u7ec4\u4ef6 keep-alive\uff0c\u539f\u7406 list.map + \u5224\u65ad\u6761\u4ef6\uff0c\u8fd8\u6709 display: none"}),Object(f.jsxs)("div",{className:m.a.router,children:["\u70b9\u51fb\u5207\u6362\u8def\u7531\uff1a",t.map((function(t){return Object(f.jsx)("span",{onClick:function(){return o(t)},children:t},t)}))]}),Object(f.jsxs)("div",{children:["\u5177\u4f53\u7ec4\u4ef6\uff1a",t.map((function(t){return u.includes(t)?Object(f.jsx)("div",{style:{display:t===r?"block":"none"},children:Object(f.jsx)(g,{flag:t},t)}):Object(f.jsx)(f.Fragment,{children:t===r&&Object(f.jsx)("div",{children:Object(f.jsx)(g,{flag:t},t)})})}))]})]})},k=n(93);e.default=function(){var t=Object(a.useState)("virtual-scroll"),e=Object(c.a)(t,2),n=e[0],r=e[1];Object(k.a)("\u6d4b\u8bd5\u9875");var s=function(){var t={knn:d,"virtual-scroll":h,"keep-alive":_}[n];return Object(f.jsx)(t,{})};return Object(f.jsxs)("div",{className:"".concat(o.a.testPage," ScrollBar"),children:[Object(f.jsx)("div",{children:"\u6d4b\u8bd5\u9875"}),Object(f.jsx)("div",{className:o.a.router,children:["knn","keep-alive","virtual-scroll"].map((function(t){return Object(f.jsx)("span",{onClick:function(){return r(t)},children:t},t)}))}),n&&Object(f.jsx)(s,{})]})}}}]);