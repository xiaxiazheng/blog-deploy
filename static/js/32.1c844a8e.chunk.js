(this.webpackJsonpreactblog=this.webpackJsonpreactblog||[]).push([[32,18],{152:function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var c=n(9);var r=n(18);function o(t){return function(t){if(Array.isArray(t))return Object(c.a)(t)}(t)||function(t){if("undefined"!==typeof Symbol&&Symbol.iterator in Object(t))return Array.from(t)}(t)||Object(r.a)(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}},330:function(t,e,n){t.exports={keepalive:"keep-alive_keepalive__3hevg",router:"keep-alive_router__1ewSh",test:"keep-alive_test__3ohon"}},382:function(t,e,n){t.exports={testPage:"test-page_testPage__1nSxo",router:"test-page_router__113Xj"}},383:function(t,e,n){t.exports={video:"knn_video__38eHu",lookTab:"knn_lookTab__CDu_s",inputTest:"knn_inputTest__3eYVH",button:"knn_button__zFAFF",ringBox:"knn_ringBox__1CVjc",ring:"knn_ring__2EKB4"}},384:function(t,e,n){t.exports={scroll:"virtual-scroll_scroll__1J62y",scrollBox:"virtual-scroll_scrollBox__2PV4p",scrollItem:"virtual-scroll_scrollItem__2Rv81"}},481:function(t,e,n){"use strict";n.r(e);var c=n(5),r=n(0),o=n(382),a=n.n(o),i=n(93),s=n(152),u=n(383),l=n.n(u),b=n(44),f=n.n(b),j=n(1),p=function(){var t=Object(r.useRef)(null),e=function(t,e,n){return Math.floor((t-e)/(n-e)*1e4)/1e4},n=Object(r.useState)(20),o=Object(c.a)(n,2),a=o[0],u=o[1],b=function(t,e,n){var c=Object(s.a)(t);return c.forEach((function(t){var c,r,o,a;t.distance=(c=t.x,r=t.y,o=e,a=n,Math.sqrt(Math.pow(o-c,2)+Math.pow(a-r,2)))})),c},p=function(t,e,n,c){var r=b(t,n,c);return r.sort((function(t,e){return t.distance-e.distance})),function(t){var e={};t.forEach((function(t){e[t.type]?e[t.type]+=1/(t.distance+1):e[t.type]=1/(t.distance+1)}));var n="",c=0;return Object.keys(e).forEach((function(t){e[t]>c&&(c=e[t],n=t)})),n}(r.splice(0,e))};Object(r.useEffect)((function(){x()}),[]);var O=Object(r.useState)([]),d=Object(c.a)(O,2),v=d[0],y=d[1],x=function(){var t=function(){for(var t=[],e=["I\u7c7b","II\u7c7b","III\u7c7b"],n=0;n<a;n++)t.push({x:Math.floor(100*Math.random()),y:Math.floor(80*Math.random()),type:e[n%e.length]});return t}();y(t),console.log("\u8bad\u7ec3\u6570\u636e",v)},h=Object(r.useState)([{x:2,y:2},{x:2,y:10},{x:50,y:5},{x:99,y:2},{x:99,y:9}]),m=Object(c.a)(h,2),g=m[0],_=m[1],k=Object(r.useState)(0),S=Object(c.a)(k,2),I=S[0],E=S[1],N=Object(r.useState)(0),M=Object(c.a)(N,2),w=M[0],A=M[1];Object(r.useEffect)((function(){0!==v.length&&0!==g.length&&L()}),[v,g]);var C=Object(r.useState)(0),T=Object(c.a)(C,2),P=T[0],B=T[1],L=function(){var n=Object(s.a)(g);console.log("\u6d4b\u8bd5\u6570\u636e",n);var c=function(t,n){var c=[].concat(Object(s.a)(t),Object(s.a)(n)),r=Number.MIN_VALUE,o=Number.MAX_VALUE,a=Number.MIN_VALUE,u=Number.MAX_VALUE;return c.forEach((function(t){t.x>r&&(r=t.x),t.y>a&&(a=t.y),t.x<o&&(o=t.x),t.y<u&&(u=t.y)})),{meanRandomList:t=t.map((function(t){return Object(i.a)(Object(i.a)({},t),{},{x:e(t.x,o,r),y:e(t.y,u,a)})})),meanTestList:n=n.map((function(t){return Object(i.a)(Object(i.a)({},t),{},{x:e(t.x,o,r),y:e(t.y,u,a)})}))}}(v,n),r=c.meanRandomList,o=c.meanTestList;console.log("\u5f52\u4e00\u5316\u540e\u7684\u8bad\u7ec3\u6570\u636e",r),console.log("\u5f52\u4e00\u5316\u540e\u7684\u6d4b\u8bd5\u6570\u636e",o);var a=function(t){for(var e=Math.floor(t.length/5),n=[],c=function(c){for(var r=[],o=function(n){var o=Object(s.a)(t),a=o.splice(n*e,e),i=0;a.forEach((function(t){t.type===p(o,c,t.x,t.y)&&i++})),r.push(i/(4===n?t.length-4*e:e))},a=0;a<5;a++)o(a);var i=0;r.forEach((function(t){i+=t})),n.push(i/5),console.log("k = ".concat(c," \u7684\u6b63\u786e\u7387: ").concat(i/5))},r=1;r<=20;r+=2)c(r);var o=0,a=0;return n.forEach((function(t,e){t>o&&(o=t,a=2*e+1)})),a}(r);B(a),console.log("\u7528\u8bad\u7ec3\u6570\u636e\u4ea4\u53c9\u9a8c\u8bc1\u5f97\u5230\u7684 k \u503c",a),console.log("\u7528 knn \u8ba1\u7b97\u5230\u6bcf\u4e2a\u70b9\u7684\u8ddd\u79bb\uff0c\u8fd4\u56de\u6743\u91cd\u6700\u5927\u7684\u5206\u7c7b\uff1a"),o.forEach((function(t,e){var c=p(r,a,t.x,t.y);n[e].type=c,console.log("[".concat(n[e].x,", ").concat(n[e].y,"]: ").concat(c))})),function(e,n){var c=t.current,r=f.a.init(c),o="black",a="orange",i="red",s={xAxis:{},yAxis:{},series:[{symbolSize:20,data:e.filter((function(t){return"I\u7c7b"===t.type})).map((function(t){return[t.x,t.y]})),color:o,type:"scatter"},{symbolSize:20,data:e.filter((function(t){return"II\u7c7b"===t.type})).map((function(t){return[t.x,t.y]})),color:a,type:"scatter"},{symbolSize:20,data:e.filter((function(t){return"III\u7c7b"===t.type})).map((function(t){return[t.x,t.y]})),color:i,type:"scatter"},{symbolSize:20,data:n.filter((function(t){return"I\u7c7b"===t.type})).map((function(t){return[t.x,t.y]})),color:"transparent",type:"scatter",itemStyle:{borderColor:o,borderWidth:3}},{symbolSize:20,data:n.filter((function(t){return"II\u7c7b"===t.type})).map((function(t){return[t.x,t.y]})),color:"transparent",type:"scatter",itemStyle:{borderColor:a,borderWidth:3}},{symbolSize:20,data:n.filter((function(t){return"III\u7c7b"===t.type})).map((function(t){return[t.x,t.y]})),color:"transparent",type:"scatter",itemStyle:{borderColor:i,borderWidth:3}}]};r.setOption(s)}(v,n),console.log("------------------------------------")};return Object(j.jsxs)("div",{className:l.a.video,children:[Object(j.jsxs)("div",{className:l.a.lookTab,children:[Object(j.jsx)("input",{className:l.a.inputTest,type:"text",value:I,onChange:function(t){E(t.target.value)}}),Object(j.jsx)("input",{className:l.a.inputTest,type:"text",value:w,onChange:function(t){A(t.target.value)}}),Object(j.jsx)("button",{className:l.a.button,onClick:function(){!function(){var t=[].concat(Object(s.a)(g),[{x:I,y:w}]);_(t)}()},children:"\u52a0\u5165\u6d4b\u8bd5\u6570\u636e"}),Object(j.jsx)("input",{className:l.a.inputTest,type:"text",value:a,onChange:function(t){u(t.target.value)}}),Object(j.jsx)("button",{className:l.a.button,onClick:function(){x()},children:"\u5237\u65b0\u8bad\u7ec3\u6570\u636e"}),Object(j.jsxs)("div",{children:["\u4ea4\u53c9\u9a8c\u8bc1\u540e\u7684 K \u503c\uff1a",P]})]}),Object(j.jsx)("div",{className:l.a.ringBox,children:Object(j.jsx)("div",{ref:t,className:l.a.ring})})]})},O=n(384),d=n.n(O),v=50,y=Math.floor(6)+1,x=function(){var t=Object(r.useState)([]),e=Object(c.a)(t,2),n=e[0],o=e[1],a=Object(r.useState)([]),i=Object(c.a)(a,2),s=i[0],u=i[1],l=Object(r.useState)(0),b=Object(c.a)(l,2),f=b[0],p=b[1],O=Object(r.useState)(0),x=Object(c.a)(O,2),h=x[0],m=x[1];Object(r.useEffect)((function(){for(var t=[],e=0;e<100;e++)t.push(e);o(t),u(t.slice(0,y)),m((100-y)*v)}),[]);return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("div",{className:d.a.scroll,style:{height:300},onScroll:function(t){var e=t.target.scrollTop,c=Math.floor(e/v);p(c*v),m((100-y-c)*v),u(n.slice(c+1,c+1+y))},children:Object(j.jsx)("div",{className:d.a.scrollBox,style:{paddingTop:f,paddingBottom:h},children:s.map((function(t){return Object(j.jsx)("div",{className:d.a.scrollItem,style:{height:v},children:t},t)}))})}),Object(j.jsxs)("div",{children:["paddingTop\uff1a",f,"px"]}),Object(j.jsxs)("div",{children:["paddingBottom\uff1a",h,"px"]}),Object(j.jsxs)("div",{children:["\u5f53\u524d\u6e32\u67d3\u5143\u7d20\uff1a",s.join(",")]})]})},h=n(330),m=n.n(h),g=function(t){var e=t.flag,n=Object(r.useState)(),o=Object(c.a)(n,2),a=o[0],i=o[1];return Object(r.useEffect)((function(){console.log("\u521d\u59cb\u5316\uff1a".concat(a)),i(1)}),[]),Object(j.jsxs)("div",{className:m.a.test,children:[e,"\uff1a",a,Object(j.jsx)("button",{onClick:function(){i((a||0)+1)},children:"\u70b9\u6211 + 1"})]})},_=function(){var t=["A","B","C","D","E","F","G"],e=Object(r.useState)("A"),n=Object(c.a)(e,2),o=n[0],a=n[1],i=Object(r.useState)([]),u=Object(c.a)(i,2),l=u[0],b=u[1];return Object(r.useEffect)((function(){l.includes(o)||b([].concat(Object(s.a)(l),[o]))}),[o]),Object(j.jsxs)("div",{className:m.a.keepalive,children:[Object(j.jsx)("div",{children:"\u6d4b\u8bd5\u7528\u6570\u7ec4\u5b9e\u73b0\u7684\u7ec4\u4ef6 keep-alive\uff0c\u539f\u7406 list.map + \u5224\u65ad\u6761\u4ef6\uff0c\u8fd8\u6709 display: none"}),Object(j.jsxs)("div",{className:m.a.router,children:["\u70b9\u51fb\u5207\u6362\u8def\u7531\uff1a",t.map((function(t){return Object(j.jsx)("span",{onClick:function(){return a(t)},children:t},t)}))]}),Object(j.jsxs)("div",{children:["\u5177\u4f53\u7ec4\u4ef6\uff1a",t.map((function(t){return l.includes(t)?Object(j.jsx)("div",{style:{display:t===o?"block":"none"},children:Object(j.jsx)(g,{flag:t},t)}):Object(j.jsx)(j.Fragment,{children:t===o&&Object(j.jsx)("div",{children:Object(j.jsx)(g,{flag:t},t)})})}))]})]})},k=n(90);e.default=function(){var t=Object(r.useState)("virtual-scroll"),e=Object(c.a)(t,2),n=e[0],o=e[1];Object(k.a)("\u6d4b\u8bd5\u9875");var i=function(){var t={knn:p,"virtual-scroll":x,"keep-alive":_}[n];return Object(j.jsx)(t,{})};return Object(j.jsxs)("div",{className:"".concat(a.a.testPage," ScrollBar"),children:[Object(j.jsx)("div",{children:"\u6d4b\u8bd5\u9875"}),Object(j.jsx)("div",{className:a.a.router,children:["knn","keep-alive","virtual-scroll"].map((function(t){return Object(j.jsx)("span",{onClick:function(){return o(t)},children:t},t)}))}),n&&Object(j.jsx)(i,{})]})}},90:function(t,e,n){"use strict";var c=n(0);e.a=function(t){Object(c.useEffect)((function(){return document.title="[\u867e] ".concat(t),function(){document.title="\u867e\u867e\u90d1\u7684\u4e2a\u4eba\u7f51\u7ad9"}}),[t])}},93:function(t,e,n){"use strict";n.d(e,"a",(function(){return o}));var c=n(98);function r(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var c=Object.getOwnPropertySymbols(t);e&&(c=c.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,c)}return n}function o(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?r(Object(n),!0).forEach((function(e){Object(c.a)(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}},98:function(t,e,n){"use strict";function c(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}n.d(e,"a",(function(){return c}))}}]);