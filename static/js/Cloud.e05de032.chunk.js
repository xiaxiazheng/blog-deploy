"use strict";(self.webpackChunkreactblog=self.webpackChunkreactblog||[]).push([["855"],{68055(e,r,t){t.d(r,{A:()=>a});var n=t(31601),o=t.n(n),i=t(76314),l=t.n(i)()(o());l.push([e.id,".cloudStorage--90684a4f{display:grid;grid-template-columns:repeat(auto-fill, 160px);column-gap:10px;margin:20px;text-align:left}.cloudStorage--90684a4f .folderBox--35dffb8c{position:relative;display:inline-block;margin:0 10px 10px 0;color:var(--color);border:1px solid var(--border_color);border-radius:3px;text-align:center;vertical-align:middle;cursor:pointer;-webkit-user-select:none;user-select:none}.cloudStorage--90684a4f .folderBox--35dffb8c:hover{color:var(--color_active);border-color:var(--color_active)}.cloudStorage--90684a4f .folderBox--35dffb8c .folderIcon--a8160d27{display:block;margin:35px auto 0;font-size:70px}.cloudStorage--90684a4f .folderBox--35dffb8c .icon--33e7321d{margin:5px 10px 0;color:var(--color);font-size:24px}.cloudStorage--90684a4f .folderBox--35dffb8c .icon--33e7321d:hover{color:var(--color_active)}.imgLength--e06f4b73{position:fixed;left:2%;top:140px;display:inline-block;width:100px;border-radius:4px;text-align:center}",""]),l.locals={cloudStorage:"cloudStorage--90684a4f",folderBox:"folderBox--35dffb8c",folderIcon:"folderIcon--a8160d27",icon:"icon--33e7321d",imgLength:"imgLength--e06f4b73"};let a=l},74182(e,r,t){t.d(r,{A:()=>a});var n=t(31601),o=t.n(n),i=t(76314),l=t.n(i)()(o());l.push([e.id,".folderBox--325a12c3{position:relative;display:inline-block;margin:0 10px 10px 0;color:var(--color);border:1px solid var(--border_color);border-radius:3px;text-align:center;vertical-align:middle;cursor:pointer;-webkit-user-select:none;user-select:none}.folderBox--325a12c3:hover{color:var(--color_active);border-color:var(--color_active)}.folderBox--325a12c3 .folderIcon--b6c68752{display:block;margin:35px auto 0;font-size:70px}.folderBox--325a12c3 .icon--301b52de{margin:1px 10px 0;color:var(--color);font-size:24px}.folderBox--325a12c3 .icon--301b52de:hover{color:var(--color_active)}.imgLength--3c60cbfe{position:fixed;left:2%;top:140px;display:inline-block;width:100px;border-radius:4px;text-align:center}",""]),l.locals={folderBox:"folderBox--325a12c3",folderIcon:"folderIcon--b6c68752",icon:"icon--301b52de",imgLength:"imgLength--3c60cbfe"};let a=l},25894(e,r,t){t.d(r,{A:()=>a});var n=t(31601),o=t.n(n),i=t(76314),l=t.n(i)()(o());l.push([e.id,".cloudTree--7edcebdb{position:fixed;left:1%;top:310px;text-align:left}.addFolder--88b6c3b1,.goback--0aef45e9{position:fixed;left:2%;display:flex;flex-direction:column;border:1px solid var(--color_active);box-sizing:border-box;border-radius:4px;overflow:hidden;width:100px;padding:7px 0 5px;line-height:1.7;cursor:pointer}.addFolder--88b6c3b1:hover,.goback--0aef45e9:hover{color:#fff;background-color:var(--color_active)}.addFolder--88b6c3b1{top:190px}.goback--0aef45e9{top:250px}",""]),l.locals={cloudTree:"cloudTree--7edcebdb",addFolder:"addFolder--88b6c3b1",goback:"goback--0aef45e9"};let a=l},99912(e,r,t){t.d(r,{A:()=>a});var n=t(31601),o=t.n(n),i=t(76314),l=t.n(i)()(o());l.push([e.id,".cloud--cd4458ea{display:inline-block;width:100%;height:100%;background-color:var(--bg_color)}.cloudContent--fec38743{width:87%;margin:0 3% 0 10%;font-size:16px}",""]),l.locals={cloud:"cloud--cd4458ea",cloudContent:"cloudContent--fec38743"};let a=l},30847(e,r,t){t.r(r),t.d(r,{default:()=>ev});var n=t(74848),o=t(96540),i=t(85072),l=t.n(i),a=t(97825),c=t.n(a),u=t(77659),s=t.n(u),d=t(55056),f=t.n(d),p=t(10540),b=t.n(p),h=t(41113),y=t.n(h),v=t(99912),m={};m.styleTagTransform=y(),m.setAttributes=f(),m.insert=s().bind(null,"head"),m.domAPI=c(),m.insertStyleElement=b(),l()(v.A,m);let g=v.A&&v.A.locals?v.A.locals:void 0;var x=t(17063),A=t(25894),w={};w.styleTagTransform=y(),w.setAttributes=f(),w.insert=s().bind(null,"head"),w.domAPI=c(),w.insertStyleElement=b(),l()(A.A,w);let j=A.A&&A.A.locals?A.A.locals:void 0;var S=t(66720),k=t(35267),_=t(19743),O=t(17125),I=t(10018),P=t(9418),T=t(48703),L=t(31515),C=t(68055),E={};E.styleTagTransform=y(),E.setAttributes=f(),E.insert=s().bind(null,"head"),E.domAPI=c(),E.insertStyleElement=b(),l()(C.A,E);let F=C.A&&C.A.locals?C.A.locals:void 0;var B=t(71870),M=t(46040),N=t(58573),z=t(73964),D=t(29622),R=t(10003),U=t(21528),$=t(60948),G=t(74182),W={};W.styleTagTransform=y(),W.setAttributes=f(),W.insert=s().bind(null,"head"),W.domAPI=c(),W.insertStyleElement=b(),l()(G.A,W);let K=G.A&&G.A.locals?G.A.locals:void 0;var V=t(81048),Y=t(8999),q=t(26385),H=t(59499);function J(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=Array(r);t<r;t++)n[t]=e[t];return n}function Q(e,r,t,n,o,i,l){try{var a=e[i](l),c=a.value}catch(e){t(e);return}a.done?r(c):Promise.resolve(c).then(n,o)}function X(e){return function(){var r=this,t=arguments;return new Promise(function(n,o){var i=e.apply(r,t);function l(e){Q(i,n,o,l,a,"next",e)}function a(e){Q(i,n,o,l,a,"throw",e)}l(void 0)})}}function Z(e,r){var t,n,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},l=Object.create(("function"==typeof Iterator?Iterator:Object).prototype),a=Object.defineProperty;return a(l,"next",{value:c(0)}),a(l,"throw",{value:c(1)}),a(l,"return",{value:c(2)}),"function"==typeof Symbol&&a(l,Symbol.iterator,{value:function(){return this}}),l;function c(a){return function(c){var u=[a,c];if(t)throw TypeError("Generator is already executing.");for(;l&&(l=0,u[0]&&(i=0)),i;)try{if(t=1,n&&(o=2&u[0]?n.return:u[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,u[1])).done)return o;switch(n=0,o&&(u=[2&u[0],o.value]),u[0]){case 0:case 1:o=u;break;case 4:return i.label++,{value:u[1],done:!1};case 5:i.label++,n=u[1],u=[0];continue;case 7:u=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===u[0]||2===u[0])){i=0;continue}if(3===u[0]&&(!o||u[1]>o[0]&&u[1]<o[3])){i.label=u[1];break}if(6===u[0]&&i.label<o[1]){i.label=o[1],o=u;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(u);break}o[2]&&i.ops.pop(),i.trys.pop();continue}u=r.call(e,i)}catch(e){u=[6,e],n=0}finally{t=o=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}}var ee=B.A.confirm;let er=(0,_.y)(function(e){var r,t=e.folderList,i=e.Width,l=e.history,a=e.getFolderList,c=e.parentId,u=e.folderMap,s=e.getAllFolderList,d=e.showModal,f=(r=(0,o.useState)(),function(e){if(Array.isArray(e))return e}(r)||function(e,r){var t,n,o=null==e?null:"u">typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=o){var i=[],l=!0,a=!1;try{for(o=o.call(e);!(l=(t=o.next()).done)&&(i.push(t.value),2!==i.length);l=!0);}catch(e){a=!0,n=e}finally{try{l||null==o.return||o.return()}finally{if(a)throw n}}return i}}(r,2)||function(e,r){if(e){if("string"==typeof e)return J(e,2);var t=Object.prototype.toString.call(e).slice(8,-1);if("Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return J(e,2)}}(r,2)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),p=f[0],b=f[1],h=function(e){l.push("/admin/cloud/".concat(e))};return(0,n.jsx)(n.Fragment,{children:t.map(function(e){return(0,n.jsxs)("div",{className:K.folderBox,style:{width:"".concat(i),height:"".concat(i)},onClick:h.bind(null,e.folder_id),onMouseEnter:function(){b(e)},onMouseLeave:function(){b(void 0)},children:[p&&p.folder_id===e.folder_id?(0,n.jsx)(V.A,{className:K.folderIcon}):(0,n.jsx)(Y.A,{className:K.folderIcon}),(0,n.jsx)("div",{children:e.name}),p&&p.folder_id===e.folder_id&&(0,n.jsxs)("div",{children:[(0,n.jsx)(q.A,{className:K.icon,title:"编辑文件夹名称",onClick:function(r){var t,n;t=e.name,n=e.folder_id,X(function(){var e,r;return Z(this,function(o){switch(o.label){case 0:if(!((e=prompt("请输入新增的文件夹的名称",t))&&""!==e))return[3,2];return r={name:e,folder_id:n},[4,(0,k.zy)(r)];case 1:o.sent()?(O.Ay.success("新增文件夹成功"),a(c)):O.Ay.error("新增文件夹失败"),o.label=2;case 2:return[2]}})})(),r.stopPropagation()}}),(0,n.jsx)(H.A,{className:K.icon,title:"删除文件夹",onClick:function(r){var t,n;t=e.name,n=e.folder_id,X(function(){return Z(this,function(e){return void 0!==u[n].children?O.Ay.warning("该文件夹内还有文件夹，暂不支持递归删除（其实里面有文件的话也不推荐删除）"):ee({title:'你将删除"'.concat(t,'"'),content:"Are you sure？",centered:!0,okText:"Yes",okType:"danger",cancelText:"No",onOk:function(){return X(function(){var e;return Z(this,function(r){switch(r.label){case 0:return e={folder_id:n},[4,(0,k.sE)(e)];case 1:return r.sent()?(O.Ay.success("删除文件夹成功"),a(c)):O.Ay.error("删除文件夹失败"),s(),[2]}})})()},onCancel:function(){O.Ay.info("已取消删除文件夹",1)}}),[2]})})(),r.stopPropagation()}}),(0,n.jsx)(N.A,{className:K.icon,title:"切换文件夹",onClick:function(r){d(e,"folder"),r.stopPropagation()}})]})]},e.folder_id)})})});function et(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=Array(r);t<r;t++)n[t]=e[t];return n}function en(e,r,t,n,o,i,l){try{var a=e[i](l),c=a.value}catch(e){t(e);return}a.done?r(c):Promise.resolve(c).then(n,o)}function eo(e){return function(){var r=this,t=arguments;return new Promise(function(n,o){var i=e.apply(r,t);function l(e){en(i,n,o,l,a,"next",e)}function a(e){en(i,n,o,l,a,"throw",e)}l(void 0)})}}function ei(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var t,n,o=null==e?null:"u">typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=o){var i=[],l=!0,a=!1;try{for(o=o.call(e);!(l=(t=o.next()).done)&&(i.push(t.value),!r||i.length!==r);l=!0);}catch(e){a=!0,n=e}finally{try{l||null==o.return||o.return()}finally{if(a)throw n}}return i}}(e,r)||ea(e,r)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function el(e){return function(e){if(Array.isArray(e))return et(e)}(e)||function(e){if("u">typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||ea(e)||function(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ea(e,r){if(e){if("string"==typeof e)return et(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);if("Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return et(e,r)}}function ec(e,r){var t,n,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},l=Object.create(("function"==typeof Iterator?Iterator:Object).prototype),a=Object.defineProperty;return a(l,"next",{value:c(0)}),a(l,"throw",{value:c(1)}),a(l,"return",{value:c(2)}),"function"==typeof Symbol&&a(l,Symbol.iterator,{value:function(){return this}}),l;function c(a){return function(c){var u=[a,c];if(t)throw TypeError("Generator is already executing.");for(;l&&(l=0,u[0]&&(i=0)),i;)try{if(t=1,n&&(o=2&u[0]?n.return:u[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,u[1])).done)return o;switch(n=0,o&&(u=[2&u[0],o.value]),u[0]){case 0:case 1:o=u;break;case 4:return i.label++,{value:u[1],done:!1};case 5:i.label++,n=u[1],u=[0];continue;case 7:u=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===u[0]||2===u[0])){i=0;continue}if(3===u[0]&&(!o||u[1]>o[0]&&u[1]<o[3])){i.label=u[1];break}if(6===u[0]&&i.label<o[1]){i.label=o[1],o=u;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(u);break}o[2]&&i.ops.pop(),i.trys.pop();continue}u=r.call(e,i)}catch(e){u=[6,e],n=0}finally{t=o=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}}var eu="160px";let es=(0,_.y)(function(e){var r=e.parentId,t=e.folderTree,i=e.folderMap,l=e.folderList,a=e.getFolderList,c=e.getAllFolderList,u=ei((0,o.useState)(!0),2),s=u[0],d=u[1],f=(0,o.useContext)(S.Rs).username;(0,o.useEffect)(function(){a(r),console.log("parentId",r),r&&(g(r),x(r))},[r]);var p=ei((0,o.useState)([]),2),b=p[0],h=p[1],y=ei((0,o.useState)([]),2),v=y[0],m=y[1],g=function(e){return eo(function(){var r,t;return ec(this,function(n){switch(n.label){case 0:return h([]),d(!0),[4,(0,k.gC)(e,f)];case 1:return(r=n.sent())&&(t=el(r),""===e&&(t=t.filter(function(e){return"cloud"===e.type})),h(t)),d(!1),[2]}})})()},x=function(e){return eo(function(){var r,t,n,o,i,l,a,c,u;return ec(this,function(s){switch(s.label){case 0:return m([]),d(!0),[4,(0,k.oO)(e,f)];case 1:if(r=s.sent()){t=[],n=el(r),""===e&&(n=n.filter(function(e){return"cloud"===e.type})),o=!0,i=!1,l=void 0;try{for(a=n[Symbol.iterator]();!(o=(c=a.next()).done);o=!0)u=c.value,t.push(function(e,r){return r=null!=r?r:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):(function(e,r){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t.push.apply(t,n)}return t})(Object(r)).forEach(function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}),e}(function(e){for(var r=1;r<arguments.length;r++){var t=null!=arguments[r]?arguments[r]:{},n=Object.keys(t);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(t).filter(function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.forEach(function(r){var n;n=t[r],r in e?Object.defineProperty(e,r,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[r]=n})}return e}({},u),{fileUrl:"".concat(D.oz,"/file/cloud/").concat(u.filename)}))}catch(e){i=!0,l=e}finally{try{o||null==a.return||a.return()}finally{if(i)throw l}}m(t)}return d(!1),[2]}})})()},A=function(e,r){console.log(e),"folder"===r&&T({name:e.name,id:e.folder_id,parent_id:e.parent_id}),"image"===r&&T({name:e.imgname,id:e.img_id,parent_id:e.parent_id}),"file"===r&&T({name:e.originalname,id:e.file_id,parent_id:e.parent_id}),E(r),_(!0),K(e.parent_id)},w=ei((0,o.useState)(!1),2),j=w[0],_=w[1],I=ei((0,o.useState)(),2),P=I[0],T=I[1],L=ei((0,o.useState)(),2),C=L[0],E=L[1],G=ei((0,o.useState)(),2),W=G[0],K=G[1];return(0,n.jsxs)(n.Fragment,{children:[(0,n.jsxs)("div",{className:F.imgLength,children:[!s&&(0,n.jsxs)(n.Fragment,{children:["共 ",b.length," 张图片"]}),(0,n.jsx)("br",{}),!s&&(0,n.jsxs)(n.Fragment,{children:["共 ",v.length," 个文件"]})]}),(0,n.jsxs)("div",{className:F.cloudStorage,children:[s&&(0,n.jsx)(k.Rh,{}),(0,n.jsx)(er,{folderList:l,Width:eu,getFolderList:a,parentId:r,folderMap:i,getAllFolderList:c,showModal:A}),"root"!==r&&(0,n.jsx)(U.A,{type:"cloud",width:eu,refresh:function(){g(r),x(r)},other_id:r}),(0,n.jsx)(R.A,{type:"cloud",imageList:b,width:eu,refresh:g.bind(null,r),iconRender:function(e){return(0,n.jsx)(N.A,{title:"切换文件夹",onClick:A.bind(null,e,"image")})}}),(0,n.jsx)($.A,{fileList:v,width:eu,refresh:x.bind(null,r),type:"cloud",iconRender:function(e){return(0,n.jsx)(N.A,{title:"切换文件夹",onClick:A.bind(null,e,"file")})}})]}),(0,n.jsx)(B.A,{title:"请选择要将 “".concat(P?P.name:"","” 更换到的目录"),open:j,onOk:function(){return eo(function(){var e,t,n,o;return ec(this,function(l){switch(l.label){case 0:if(!W)return O.Ay.warning("请选择一个节点",.5),[2];if(W===P.parent_id)return O.Ay.warning("与原文件夹相同，无需切换",.5),[2];return e=new Promise(function(){}),t={},"file"===C&&(e=k.ME,t={file_id:P.id,other_id:W}),"image"===C&&(e=k.R$,t={img_id:P.id,other_id:W}),"folder"===C&&(e=k.pg,t={folder_id:P.id,parent_id:W}),[4,e(t)];case 1:return n=l.sent(),o={folder:"文件夹",image:"图片",file:"文件"},n?(O.Ay.success("更换".concat(o[C||""]," “").concat(P.name,"” 到 “").concat(i[W]?i[W].name:"根目录","” 文件夹下成功")),_(!1),T(void 0),E(void 0),K(void 0),"image"===C&&g(r),"file"===C&&x(r),"folder"===C&&(a(r),c())):O.Ay.error("更换".concat(o[C||""]," “").concat(P.name,"” 到 “").concat(i[W]?i[W].name:"根目录","” 文件夹下失败")),[2]}})})()},onCancel:function(){O.Ay.warning("已取消更换文件夹",.5),_(!1),T(void 0),E(void 0),K(void 0)},children:(0,n.jsx)(M.A,{showIcon:!0,defaultExpandAll:!0,onSelect:function(e,r){e[0]===P.parent_id?O.Ay.warning("与源文件夹一致",.5):(K(e[0]),console.log(e[0]))},switcherIcon:(0,n.jsx)(z.A,{}),treeData:t,selectedKeys:[W||""]})})]})});function ed(e,r){(null==r||r>e.length)&&(r=e.length);for(var t=0,n=Array(r);t<r;t++)n[t]=e[t];return n}function ef(e,r,t,n,o,i,l){try{var a=e[i](l),c=a.value}catch(e){t(e);return}a.done?r(c):Promise.resolve(c).then(n,o)}function ep(e){return function(){var r=this,t=arguments;return new Promise(function(n,o){var i=e.apply(r,t);function l(e){ef(i,n,o,l,a,"next",e)}function a(e){ef(i,n,o,l,a,"throw",e)}l(void 0)})}}function eb(e,r){return function(e){if(Array.isArray(e))return e}(e)||function(e,r){var t,n,o=null==e?null:"u">typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=o){var i=[],l=!0,a=!1;try{for(o=o.call(e);!(l=(t=o.next()).done)&&(i.push(t.value),!r||i.length!==r);l=!0);}catch(e){a=!0,n=e}finally{try{l||null==o.return||o.return()}finally{if(a)throw n}}return i}}(e,r)||function(e,r){if(e){if("string"==typeof e)return ed(e,r);var t=Object.prototype.toString.call(e).slice(8,-1);if("Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t)return Array.from(t);if("Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t))return ed(e,r)}}(e,r)||function(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function eh(e,r){var t,n,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},l=Object.create(("function"==typeof Iterator?Iterator:Object).prototype),a=Object.defineProperty;return a(l,"next",{value:c(0)}),a(l,"throw",{value:c(1)}),a(l,"return",{value:c(2)}),"function"==typeof Symbol&&a(l,Symbol.iterator,{value:function(){return this}}),l;function c(a){return function(c){var u=[a,c];if(t)throw TypeError("Generator is already executing.");for(;l&&(l=0,u[0]&&(i=0)),i;)try{if(t=1,n&&(o=2&u[0]?n.return:u[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,u[1])).done)return o;switch(n=0,o&&(u=[2&u[0],o.value]),u[0]){case 0:case 1:o=u;break;case 4:return i.label++,{value:u[1],done:!1};case 5:i.label++,n=u[1],u=[0];continue;case 7:u=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===u[0]||2===u[0])){i=0;continue}if(3===u[0]&&(!o||u[1]>o[0]&&u[1]<o[3])){i.label=u[1];break}if(6===u[0]&&i.label<o[1]){i.label=o[1],o=u;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(u);break}o[2]&&i.ops.pop(),i.trys.pop();continue}u=r.call(e,i)}catch(e){u=[6,e],n=0}finally{t=o=0}if(5&u[0])throw u[1];return{value:u[0]?u[1]:void 0,done:!0}}}}let ey=(0,_.y)(function(e){var r=e.match,t=e.history,i=(0,o.useContext)(S.Rs).username,l=eb((0,o.useState)(),2),a=l[0],c=l[1],u=eb((0,o.useState)({}),2),s=u[0],d=u[1],f=eb((0,o.useState)([]),2),p=f[0],b=f[1],h=eb((0,o.useState)("root"),2),y=h[0],v=h[1];(0,o.useEffect)(function(){m()},[]),(0,o.useEffect)(function(){v(r.params.parent_id||"root")},[r]);var m=function(){return ep(function(){var e,r,t,o;return eh(this,function(l){switch(l.label){case 0:return[4,(0,k._V)(i)];case 1:return(e=l.sent())&&(r=e.tree,t={},c([{title:"根目录",key:"root",icon:function(e){return e.selected?(0,n.jsx)(T.A,{}):(0,n.jsx)(L.A,{})},children:(o=function(e){return e.forEach(function(e){e.title=e.name,e.icon=function(e){return e.selected?(0,n.jsx)(T.A,{}):(0,n.jsx)(L.A,{})},e.key=e.folder_id,e.children&&(e.children=o(e.children)),t[e.folder_id]=e}),e})(r)}]),d(t)),[2]}})})()},g=function(e){return ep(function(){var r;return eh(this,function(t){switch(t.label){case 0:return b([]),[4,(0,k.L2)(e,i)];case 1:return(r=t.sent())&&b(r.sort(function(e,r){return new Date(r.cTime).getTime()-new Date(e.cTime).getTime()})),[2]}})})()};return(0,n.jsxs)(n.Fragment,{children:["root"!==y&&(0,n.jsxs)("div",{className:j.goback,onClick:function(){t.push("/admin/cloud/".concat(s[y].parent_id))},children:[(0,n.jsx)(I.A,{}),"返回上一层"]}),(0,n.jsxs)("div",{className:j.addFolder,onClick:function(){return ep(function(){var e,r;return eh(this,function(t){switch(t.label){case 0:if(!((e=prompt("请输入新增的文件夹的名称","new folder"))&&""!==e))return[3,2];return r={name:e,parent_id:y},[4,(0,k.Mp)(r)];case 1:t.sent()?(O.Ay.success("新增文件夹成功"),g(y),m()):O.Ay.error("新增文件夹失败"),t.label=2;case 2:return[2]}})})()},children:[(0,n.jsx)(P.A,{}),"新增文件夹"]}),(0,n.jsx)(es,{parentId:y,folderList:p,folderMap:s,folderTree:a,getFolderList:g,getAllFolderList:m})]})}),ev=function(){return(0,x.A)("cloud"),(0,n.jsx)("div",{className:g.cloud,children:(0,n.jsx)("div",{className:g.cloudContent,children:(0,n.jsx)(ey,{})})})}}}]);