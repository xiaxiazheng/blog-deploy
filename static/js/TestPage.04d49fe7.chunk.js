(this.webpackJsonpreactblog=this.webpackJsonpreactblog||[]).push([[23],{332:function(e,t,n){e.exports={keepalive:"keep-alive_keepalive__3hevg",router:"keep-alive_router__1ewSh",test:"keep-alive_test__3ohon"}},428:function(e,t,n){e.exports={testPage:"test-page_testPage__1nSxo",router:"test-page_router__113Xj",active:"test-page_active__XwVRC"}},429:function(e,t,n){e.exports={h5:"h5_h5__2mwi8"}},430:function(e,t,n){e.exports={handleMove:"dnd-sort_handleMove__7dVJI"}},431:function(e,t,n){e.exports={video:"knn_video__38eHu",lookTab:"knn_lookTab__CDu_s",inputTest:"knn_inputTest__3eYVH",button:"knn_button__zFAFF",ringBox:"knn_ringBox__1CVjc",ring:"knn_ring__2EKB4"}},432:function(e,t,n){e.exports={scroll:"virtual-scroll_scroll__1J62y",scrollBox:"virtual-scroll_scrollBox__2PV4p",scrollItem:"virtual-scroll_scrollItem__2Rv81"}},502:function(e,t,n){"use strict";n.r(t);var c=n(5),r=n(0),o=n(428),i=n.n(o),a=(n(71),n(70)),s=(n(90),n(91)),l=n(136),u=n(87),d=n(349),b=n(429),f=n.n(b),j=n(1),h={Button:function(e){var t=e.style;return Object(j.jsx)(a.a,{style:t,children:"\u6309\u94ae"})},Input:function(e){var t=e.style;return Object(j.jsx)(s.a,{style:t})}},v=n(430),O=n.n(v),p=n(520),m=n(521),x=n(512),y=n(449),g=n(443),_=n.n(g),k=function(e){var t=e.id,n=e.index,o=e.moveCard,i=Object(r.useRef)(null),a=Object(p.a)({accept:"box",collect:function(e){return{handlerId:e.getHandlerId()}},hover:function(e,t){var c;if(i.current){var r=e.index,a=n;if(r!==a){var s=null===(c=i.current)||void 0===c?void 0:c.getBoundingClientRect(),l=(s.bottom-s.top)/2,u=t.getClientOffset().y-s.top;r<a&&u<l||r>a&&u>l||(o(r,a),e.index=a)}}}}),s=Object(c.a)(a,2),l=s[0].handlerId,u=s[1],d=Object(m.a)({type:"box",item:function(){return{id:t,index:n}},collect:function(e){return{isDragging:e.isDragging()}}}),b=Object(c.a)(d,2),f=b[0].isDragging?0:1;return(0,b[1])(u(i)),Object(j.jsx)("span",{className:O.a.handleMove,ref:i,style:{opacity:f},"data-handler-id":l,children:e.children})},E=function(e){var t=e.cards,n=e.setCards,c=Object(r.useCallback)((function(e,c){var r=t[e];n(_()(t,{$splice:[[e,1],[c,0,r]]}))}),[t]);return Object(j.jsxs)(x.a,{backend:y.a,children:[Object(j.jsx)("div",{children:"\u7ec4\u4ef6\u5e93"}),Object(j.jsx)("div",{children:t.map((function(t,n){return Object(j.jsx)(k,{index:n,id:t.id,moveCard:c,children:e.children(t)},t.id)}))})]})},S=function(e){var t=Object(r.useRef)(null),n=Object(r.useState)(),o=Object(c.a)(n,2),i=o[0],a=o[1],s=Object(r.useState)(),l=Object(c.a)(s,2),u=l[0],d=l[1],b=Object(r.useState)(!1),f=Object(c.a)(b,2),h=f[0],v=f[1],O=Object(r.useRef)(null);return Object(r.useEffect)((function(){var e,n,c=0,r=0,o=0,i=0,s=function(e){c=t.current.offsetWidth,r=t.current.offsetHeight,o=e.clientX,i=e.clientY,document.documentElement.addEventListener("mousemove",u,!1)},l=function(e){document.documentElement.removeEventListener("mousemove",u,!1)},u=function(e){var n=c+e.clientX-o;t.current.style.width="".concat(n,"px"),a(n);var s=r+e.clientY-i;t.current.style.height="".concat(s,"px"),d(s)};h?(null===(e=O.current)||void 0===e||e.addEventListener("mousedown",s,!1),document.documentElement.addEventListener("mouseup",l,!1)):(null===(n=O.current)||void 0===n||n.removeEventListener("mousedown",s,!1),document.documentElement.removeEventListener("mouseup",l,!1))}),[h]),Object(j.jsxs)("span",{ref:t,style:{position:"relative",display:"inline-block",border:h?"1px solid black":"none"},onDoubleClick:function(){return v((function(e){return!e}))},children:[e.children(i,u),h&&Object(j.jsx)("span",{ref:O,style:{position:"absolute",backgroundColor:"black",display:"inline-block",width:4,height:4,bottom:0,right:0,cursor:"se-resize"}})]})},C=["type"],N=function(e){var t=e.type,n=Object(d.a)(e,C),c=h[t];return Object(j.jsx)(S,{children:function(e,t){return Object(j.jsx)(c,Object(u.a)(Object(u.a)({},n),{},{style:{width:e,height:t}}))}})},I=function(){var e=Object(r.useState)([{id:1,type:"Input",style:{},props:{}},{id:2,type:"Button",style:{},props:{}},{id:3,type:"Button",style:{},props:{}}]),t=Object(c.a)(e,2),n=t[0],o=t[1];Object(r.useEffect)((function(){console.log("cards",n)}),[n]);var i=Object(r.useState)(),u=Object(c.a)(i,2),d=u[0],b=u[1];Object(r.useEffect)((function(){console.log("activeCard",d),p(JSON.stringify((null===d||void 0===d?void 0:d.style)||""))}),[d]);var h=Object(r.useState)(),v=Object(c.a)(h,2),O=v[0],p=v[1];return Object(j.jsxs)("div",{className:f.a.h5,children:[Object(j.jsx)("div",{children:Object(j.jsx)(E,{cards:n,setCards:o,children:function(e){return Object(j.jsx)("span",{onClick:function(){b(e)},children:N(e)})}})}),Object(j.jsxs)("div",{children:[Object(j.jsx)("div",{children:"\u7f16\u8f91\u6837\u5f0f"}),Object(j.jsx)(s.a,{value:O,onChange:function(e){return p(e.target.value)}}),Object(j.jsx)(a.a,{onClick:function(){!function(){console.log(O);var e=Object(l.a)(n);e.forEach((function(e){e.id===(null===d||void 0===d?void 0:d.id)&&O&&(e.style=JSON.parse(O))})),o(e)}()},children:"\u63d0\u4ea4\u4fee\u6539"})]})]})},z=n(431),M=n.n(z),w=n(44),B=n.n(w),R=function(){var e=Object(r.useRef)(null),t=function(e,t,n){return Math.floor((e-t)/(n-t)*1e4)/1e4},n=Object(r.useState)(20),o=Object(c.a)(n,2),i=o[0],a=o[1],s=function(e,t,n){var c=Object(l.a)(e);return c.forEach((function(e){var c,r,o,i;e.distance=(c=e.x,r=e.y,o=t,i=n,Math.sqrt(Math.pow(o-c,2)+Math.pow(i-r,2)))})),c},d=function(e,t,n,c){var r=s(e,n,c);return r.sort((function(e,t){return e.distance-t.distance})),function(e){var t={};e.forEach((function(e){t[e.type]?t[e.type]+=1/(e.distance+1):t[e.type]=1/(e.distance+1)}));var n="",c=0;return Object.keys(t).forEach((function(e){t[e]>c&&(c=t[e],n=e)})),n}(r.splice(0,t))};Object(r.useEffect)((function(){O()}),[]);var b=Object(r.useState)([]),f=Object(c.a)(b,2),h=f[0],v=f[1],O=function(){var e=function(){for(var e=[],t=["I\u7c7b","II\u7c7b","III\u7c7b"],n=0;n<i;n++)e.push({x:Math.floor(100*Math.random()),y:Math.floor(80*Math.random()),type:t[n%t.length]});return e}();v(e),console.log("\u8bad\u7ec3\u6570\u636e",h)},p=Object(r.useState)([{x:2,y:2},{x:2,y:10},{x:50,y:5},{x:99,y:2},{x:99,y:9}]),m=Object(c.a)(p,2),x=m[0],y=m[1],g=Object(r.useState)(0),_=Object(c.a)(g,2),k=_[0],E=_[1],S=Object(r.useState)(0),C=Object(c.a)(S,2),N=C[0],I=C[1];Object(r.useEffect)((function(){0!==h.length&&0!==x.length&&T()}),[h,x]);var z=Object(r.useState)(0),w=Object(c.a)(z,2),R=w[0],L=w[1],T=function(){var n=Object(l.a)(x);console.log("\u6d4b\u8bd5\u6570\u636e",n);var c=function(e,n){var c=[].concat(Object(l.a)(e),Object(l.a)(n)),r=Number.MIN_VALUE,o=Number.MAX_VALUE,i=Number.MIN_VALUE,a=Number.MAX_VALUE;return c.forEach((function(e){e.x>r&&(r=e.x),e.y>i&&(i=e.y),e.x<o&&(o=e.x),e.y<a&&(a=e.y)})),{meanRandomList:e=e.map((function(e){return Object(u.a)(Object(u.a)({},e),{},{x:t(e.x,o,r),y:t(e.y,a,i)})})),meanTestList:n=n.map((function(e){return Object(u.a)(Object(u.a)({},e),{},{x:t(e.x,o,r),y:t(e.y,a,i)})}))}}(h,n),r=c.meanRandomList,o=c.meanTestList;console.log("\u5f52\u4e00\u5316\u540e\u7684\u8bad\u7ec3\u6570\u636e",r),console.log("\u5f52\u4e00\u5316\u540e\u7684\u6d4b\u8bd5\u6570\u636e",o);var i=function(e){for(var t=Math.floor(e.length/5),n=[],c=function(c){for(var r=[],o=function(n){var o=Object(l.a)(e),i=o.splice(n*t,t),a=0;i.forEach((function(e){e.type===d(o,c,e.x,e.y)&&a++})),r.push(a/(4===n?e.length-4*t:t))},i=0;i<5;i++)o(i);var a=0;r.forEach((function(e){a+=e})),n.push(a/5),console.log("k = ".concat(c," \u7684\u6b63\u786e\u7387: ").concat(a/5))},r=1;r<=20;r+=2)c(r);var o=0,i=0;return n.forEach((function(e,t){e>o&&(o=e,i=2*t+1)})),i}(r);L(i),console.log("\u7528\u8bad\u7ec3\u6570\u636e\u4ea4\u53c9\u9a8c\u8bc1\u5f97\u5230\u7684 k \u503c",i),console.log("\u7528 knn \u8ba1\u7b97\u5230\u6bcf\u4e2a\u70b9\u7684\u8ddd\u79bb\uff0c\u8fd4\u56de\u6743\u91cd\u6700\u5927\u7684\u5206\u7c7b\uff1a"),o.forEach((function(e,t){var c=d(r,i,e.x,e.y);n[t].type=c,console.log("[".concat(n[t].x,", ").concat(n[t].y,"]: ").concat(c))})),function(t,n){var c=e.current,r=B.a.init(c),o="black",i="orange",a="red",s={xAxis:{},yAxis:{},series:[{symbolSize:20,data:t.filter((function(e){return"I\u7c7b"===e.type})).map((function(e){return[e.x,e.y]})),color:o,type:"scatter"},{symbolSize:20,data:t.filter((function(e){return"II\u7c7b"===e.type})).map((function(e){return[e.x,e.y]})),color:i,type:"scatter"},{symbolSize:20,data:t.filter((function(e){return"III\u7c7b"===e.type})).map((function(e){return[e.x,e.y]})),color:a,type:"scatter"},{symbolSize:20,data:n.filter((function(e){return"I\u7c7b"===e.type})).map((function(e){return[e.x,e.y]})),color:"transparent",type:"scatter",itemStyle:{borderColor:o,borderWidth:3}},{symbolSize:20,data:n.filter((function(e){return"II\u7c7b"===e.type})).map((function(e){return[e.x,e.y]})),color:"transparent",type:"scatter",itemStyle:{borderColor:i,borderWidth:3}},{symbolSize:20,data:n.filter((function(e){return"III\u7c7b"===e.type})).map((function(e){return[e.x,e.y]})),color:"transparent",type:"scatter",itemStyle:{borderColor:a,borderWidth:3}}]};r.setOption(s)}(h,n),console.log("------------------------------------")};return Object(j.jsxs)("div",{className:M.a.video,children:[Object(j.jsxs)("div",{className:M.a.lookTab,children:[Object(j.jsx)("input",{className:M.a.inputTest,type:"text",value:k,onChange:function(e){E(e.target.value)}}),Object(j.jsx)("input",{className:M.a.inputTest,type:"text",value:N,onChange:function(e){I(e.target.value)}}),Object(j.jsx)("button",{className:M.a.button,onClick:function(){!function(){var e=[].concat(Object(l.a)(x),[{x:k,y:N}]);y(e)}()},children:"\u52a0\u5165\u6d4b\u8bd5\u6570\u636e"}),Object(j.jsx)("input",{className:M.a.inputTest,type:"text",value:i,onChange:function(e){a(e.target.value)}}),Object(j.jsx)("button",{className:M.a.button,onClick:function(){O()},children:"\u5237\u65b0\u8bad\u7ec3\u6570\u636e"}),Object(j.jsxs)("div",{children:["\u4ea4\u53c9\u9a8c\u8bc1\u540e\u7684 K \u503c\uff1a",R]})]}),Object(j.jsx)("div",{className:M.a.ringBox,children:Object(j.jsx)("div",{ref:e,className:M.a.ring})})]})},L=n(432),T=n.n(L),H=50,A=Math.floor(6)+1,V=function(){var e=Object(r.useState)([]),t=Object(c.a)(e,2),n=t[0],o=t[1],i=Object(r.useState)([]),a=Object(c.a)(i,2),s=a[0],l=a[1],u=Object(r.useState)(0),d=Object(c.a)(u,2),b=d[0],f=d[1],h=Object(r.useState)(0),v=Object(c.a)(h,2),O=v[0],p=v[1];Object(r.useEffect)((function(){for(var e=[],t=0;t<100;t++)e.push(t);o(e),l(e.slice(0,A)),p((100-A)*H)}),[]);return Object(j.jsxs)(j.Fragment,{children:[Object(j.jsx)("div",{className:T.a.scroll,style:{height:300},onScroll:function(e){var t=e.target.scrollTop,c=Math.floor(t/H);f(c*H),p((100-A-c)*H),l(n.slice(c+1,c+1+A))},children:Object(j.jsx)("div",{className:T.a.scrollBox,style:{paddingTop:b,paddingBottom:O},children:s.map((function(e){return Object(j.jsx)("div",{className:T.a.scrollItem,style:{height:H},children:e},e)}))})}),Object(j.jsxs)("div",{children:["paddingTop\uff1a",b,"px"]}),Object(j.jsxs)("div",{children:["paddingBottom\uff1a",O,"px"]}),Object(j.jsxs)("div",{children:["\u5f53\u524d\u6e32\u67d3\u5143\u7d20\uff1a",s.join(",")]})]})},W=n(332),U=n.n(W),D=function(e){var t=e.flag,n=Object(r.useState)(),o=Object(c.a)(n,2),i=o[0],a=o[1];return Object(r.useEffect)((function(){console.log("\u521d\u59cb\u5316\uff1a".concat(i)),a(1)}),[]),Object(j.jsxs)("div",{className:U.a.test,children:[t,"\uff1a",i,Object(j.jsx)("button",{onClick:function(){a((i||0)+1)},children:"\u70b9\u6211 + 1"})]})},F=function(){var e=["A","B","C","D","E","F","G"],t=Object(r.useState)("A"),n=Object(c.a)(t,2),o=n[0],i=n[1],a=Object(r.useState)([]),s=Object(c.a)(a,2),u=s[0],d=s[1];return Object(r.useEffect)((function(){u.includes(o)||d([].concat(Object(l.a)(u),[o]))}),[o]),Object(j.jsxs)("div",{className:U.a.keepalive,children:[Object(j.jsx)("div",{children:"\u6d4b\u8bd5\u7528\u6570\u7ec4\u5b9e\u73b0\u7684\u7ec4\u4ef6 keep-alive\uff0c\u539f\u7406 list.map + \u5224\u65ad\u6761\u4ef6\uff0c\u8fd8\u6709 display: none"}),Object(j.jsxs)("div",{className:U.a.router,children:["\u70b9\u51fb\u5207\u6362\u8def\u7531\uff1a",e.map((function(e){return Object(j.jsx)("span",{onClick:function(){return i(e)},children:e},e)}))]}),Object(j.jsxs)("div",{children:["\u5177\u4f53\u7ec4\u4ef6\uff1a",e.map((function(e){return u.includes(e)?Object(j.jsx)("div",{style:{display:e===o?"block":"none"},children:Object(j.jsx)(D,{flag:e},e)}):Object(j.jsx)(j.Fragment,{children:e===o&&Object(j.jsx)("div",{children:Object(j.jsx)(D,{flag:e},e)})})}))]})]})},J=n(84);t.default=function(){var e=Object(r.useState)("H5"),t=Object(c.a)(e,2),n=t[0],o=t[1];Object(J.a)("\u6d4b\u8bd5\u9875");var a=function(){var e={H5:I,knn:R,"virtual-scroll":V,"keep-alive":F}[n];return Object(j.jsx)(e,{})};return Object(j.jsxs)("div",{className:"".concat(i.a.testPage," ScrollBar"),children:[Object(j.jsx)("div",{children:"\u6d4b\u8bd5\u9875"}),Object(j.jsx)("div",{className:i.a.router,children:["H5","knn","keep-alive","virtual-scroll"].map((function(e){return Object(j.jsx)("span",{className:e===n?i.a.active:"",onClick:function(){return o(e)},children:e},e)}))}),n&&Object(j.jsx)(a,{})]})}},79:function(e,t,n){"use strict";var c=n(49),r=n(57),o=n(60),i=n(61),a=n(62),s=n(0),l=n(137),u=n(93),d=n(66),b=n(78),f=n(145),j=function(e){Object(i.a)(n,e);var t=Object(a.a)(n);function n(){var e;return Object(r.a)(this,n),(e=t.apply(this,arguments)).resizeObserver=null,e.childNode=null,e.currentElement=null,e.state={width:0,height:0,offsetHeight:0,offsetWidth:0},e.onResize=function(t){var n=e.props.onResize,r=t[0].target,o=r.getBoundingClientRect(),i=o.width,a=o.height,s=r.offsetWidth,l=r.offsetHeight,u=Math.floor(i),d=Math.floor(a);if(e.state.width!==u||e.state.height!==d||e.state.offsetWidth!==s||e.state.offsetHeight!==l){var b={width:u,height:d,offsetWidth:s,offsetHeight:l};e.setState(b),n&&Promise.resolve().then((function(){n(Object(c.a)(Object(c.a)({},b),{},{offsetWidth:s,offsetHeight:l}),r)}))}},e.setChildNode=function(t){e.childNode=t},e}return Object(o.a)(n,[{key:"componentDidMount",value:function(){this.onComponentUpdated()}},{key:"componentDidUpdate",value:function(){this.onComponentUpdated()}},{key:"componentWillUnmount",value:function(){this.destroyObserver()}},{key:"onComponentUpdated",value:function(){if(this.props.disabled)this.destroyObserver();else{var e=Object(l.a)(this.childNode||this);e!==this.currentElement&&(this.destroyObserver(),this.currentElement=e),!this.resizeObserver&&e&&(this.resizeObserver=new f.a(this.onResize),this.resizeObserver.observe(e))}}},{key:"destroyObserver",value:function(){this.resizeObserver&&(this.resizeObserver.disconnect(),this.resizeObserver=null)}},{key:"render",value:function(){var e=this.props.children,t=Object(u.a)(e);if(t.length>1)Object(d.a)(!1,"Find more than one child node with `children` in ResizeObserver. Will only observe first one.");else if(0===t.length)return Object(d.a)(!1,"`children` of ResizeObserver is empty. Nothing is in observe."),null;var n=t[0];if(s.isValidElement(n)&&Object(b.c)(n)){var c=n.ref;t[0]=s.cloneElement(n,{ref:Object(b.a)(c,this.setChildNode)})}return 1===t.length?t[0]:t.map((function(e,t){return!s.isValidElement(e)||"key"in e&&null!==e.key?e:s.cloneElement(e,{key:"".concat("rc-observer-key","-").concat(t)})}))}}]),n}(s.Component);j.displayName="ResizeObserver",t.a=j}}]);